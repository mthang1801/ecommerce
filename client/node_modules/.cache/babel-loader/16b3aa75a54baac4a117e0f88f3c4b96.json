{"ast":null,"code":"var _jsxFileName = \"/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Seller/register-form/register-form.component.jsx\";\nimport React, { useState, useEffect, useContext, useRef } from \"react\";\nimport { Form, FormInline, FormGroup, Label, Input, Required, Select, Option, Editable } from \"./register-form.styles\";\nimport AppContext from \"../../../context/app-viewport.context\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { PaymentInputsWrapper, usePaymentInputs } from \"react-payment-inputs\";\nimport images from \"react-payment-inputs/images\";\nimport { getListCities, getListDistricts, getListWards } from \"../../../utils/algorithms\";\nimport { selectRegisterForm } from \"../../../redux/seller/seller.selectors\";\nimport { FiEdit } from \"react-icons/fi\";\nimport { saveRegisterForm } from \"../../../redux/seller/seller.actions\";\n\nconst RegisterForm = ({\n  user,\n  register,\n  setDisabledNext,\n  save,\n  scroll\n}) => {\n  const {\n    address,\n    cardNumber,\n    cvc,\n    disabledEmail,\n    expiryDate,\n    firstName,\n    lastName,\n    phone,\n    selectedCity,\n    selectedDist,\n    selectedWard\n  } = register;\n  const {\n    wrapperProps,\n    getCardImageProps,\n    getCardNumberProps,\n    getExpiryDateProps,\n    getCVCProps\n  } = usePaymentInputs();\n  useEffect(() => {\n    if (user) {\n      save({\n        email: user.email\n      });\n    }\n  }, [user]);\n  const [listCities, setListCites] = useState([]);\n  const [listDistricts, setListDistricts] = useState([]);\n  const [listWards, setListWards] = useState([]); // const [cardNumber, setCardNumber] = useState(register.cardNumber || \"\");\n  // const [expiryDate, setExpiryDate] = useState(register.expiryDate || \"\");\n  // const [cvc, setCvc] = useState(register.cvc || \"\");\n  // const [firstName, setFirstName] = useState(register.firstName || \"\");\n  // const [lastName, setLastName] = useState(register.lastName || \"\");\n  // const [address, setAddress] = useState(register.address || \"\");\n  // const [phone, setPhone] = useState(register.phone || \"\");\n  // const [email, setEmail] = useState(user.email);\n\n  const [mobileView, setMobileView] = useState(window.innerWidth < 600); // const [disabledEmail, setDisabledEmail] = useState(\n  //   register.disabledEmail || true\n  // );\n  // const [selectedCity, setSelectedCity] = useState({\n  //   ID: register.selectedCity.ID || \"\",\n  //   SolrID: register.selectedCity.SolrID || \"\",\n  //   Title: register.selectedCity.Title || \"\",\n  // });\n  // const [selectedDist, setSelectedDist] = useState({\n  //   ID: register.selectedDist.ID || \"\",\n  //   SolrID: register.selectedDist.SolrID || \"\",\n  //   Title: register.selectedDist.Title || \"\",\n  // });\n  // const [selectedWard, setSelectedWard] = useState({\n  //   ID: register.selectedWard.ID || \"\",\n  //   SolrID: register.selectedWard.SolrID || \"\",\n  //   Title: register.selectedWard.Title || \"\",\n  // });\n\n  const [error, setError] = useState(null);\n  const [tabletView, setTabletView] = useState(window.innerWidth < 992 && window.innerWidth >= 660);\n  const formRef = useRef(null);\n  useEffect(() => {\n    window.scrollTo({\n      top: scroll,\n      behavior: \"smooth\"\n    });\n  }, [scroll]);\n  const width = useContext(AppContext);\n  useEffect(() => {\n    if (width < 660) {\n      setMobileView(true);\n    } else {\n      setMobileView(false);\n    }\n\n    if (width < 992 && width >= 660) {\n      setTabletView(true);\n    } else {\n      setTabletView(false);\n    }\n  }, [width]);\n  useEffect(() => {\n    let _mounted = true;\n    getListCities().then(listCities => {\n      if (_mounted) {\n        setListCites([{\n          ID: \"\",\n          Title: \"Chọn thành phố\",\n          status: \"disabled\"\n        }, ...listCities]);\n      }\n    }).catch(err => {\n      if (_mounted) {\n        setError(err);\n      }\n    });\n    return () => _mounted = false;\n  }, [getListCities]);\n  useEffect(() => {\n    if (firstName && lastName && selectedCity && selectedDist && selectedWard && address && phone && email && cardNumber && expiryDate && cvc) {\n      setDisabledNext(false);\n    } else {\n      setDisabledNext(true);\n    }\n\n    setDisabledNext(true);\n  }, [firstName, lastName, selectedCity, selectedDist, selectedWard, address, phone, email, cardNumber, expiryDate, cvc]);\n\n  const handleChangeCity = e => {\n    const index = e.nativeEvent.target.selectedIndex;\n    setSelectedCity({\n      ID: e.target.value,\n      SolrID: e.target.childNodes[index].dataset.url,\n      Title: e.nativeEvent.target[index].text\n    });\n    save({\n      selectedCity: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text\n      }\n    });\n    setSelectedDist({\n      ID: \"\",\n      SolrID: \"\",\n      Title: \"\"\n    });\n    setSelectedWard({\n      ID: \"\",\n      SolrID: \"\",\n      Title: \"\"\n    });\n    setListWards([]);\n    getListDistricts(e.target.value).then(data => {\n      setListDistricts([{\n        ID: \"\",\n        Title: \"Chọn Quận Huyện\",\n        status: \"disabled\"\n      }, ...data]);\n    }).catch(err => {\n      setError(err);\n    });\n  };\n\n  const handleChangeDistrict = e => {\n    const index = e.nativeEvent.target.selectedIndex;\n    setSelectedDist({\n      selectedDistrict: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text\n      }\n    });\n    setSelectedWard({\n      ID: \"\",\n      SolrID: \"\",\n      Title: \"\"\n    });\n    save({\n      selectedDist: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text\n      }\n    });\n    getListWards(e.target.value).then(data => setListWards([{\n      ID: \"\",\n      Title: \"Chọn Phường, Xã\",\n      status: \"disabled\"\n    }, ...data])).catch(err => setError(err));\n  };\n\n  const handleChangeWard = e => {\n    const index = e.nativeEvent.target.selectedIndex;\n    setSelectedWard({\n      ID: e.target.value,\n      SolrID: e.target.childNodes[index].dataset.url,\n      Title: e.nativeEvent.target[index].text\n    });\n    save({\n      selectedWard: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text\n      }\n    });\n  };\n\n  const handleChangeCardNumber = e => {\n    setCardNumber(e.target.value);\n    save({\n      cardNumber: e.target.value\n    });\n  };\n\n  const handleChangeExpiryDate = e => {\n    console.log(e.target.value);\n    setExpiryDate(e.target.value);\n    save({\n      expiryDate: e.target.value\n    });\n  };\n\n  const handleChangeCVC = e => {\n    setCvc(e.target.value);\n    save({\n      cvc: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    mobileView: mobileView,\n    tabletView: tabletView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }, error && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 19\n    }\n  }, error), /*#__PURE__*/React.createElement(FormInline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"first_name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Required, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 15\n    }\n  }, \"H\\u1ECD*\")), /*#__PURE__*/React.createElement(Input, {\n    name: \"first_name\",\n    id: \"first_name\",\n    value: firstName,\n    onChange: e => {\n      save({\n        firstName: e.target.value\n      });\n      setFirstName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"last_name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Required, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 15\n    }\n  }, \"T\\xEAn*\")), /*#__PURE__*/React.createElement(Input, {\n    name: \"last_name\",\n    id: \"last_name\",\n    value: lastName,\n    onChange: e => {\n      save({\n        lastName: e.target.value\n      });\n      setLastName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 11\n    }\n  }, \"Th\\xE0nh ph\\u1ED1\"), /*#__PURE__*/React.createElement(Select, {\n    valie: selectedCity.ID,\n    onChange: handleChangeCity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, listCities.map(city => /*#__PURE__*/React.createElement(Option, {\n    key: city.ID,\n    value: city.ID,\n    \"data-url\": city.SolrID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, city.Title)))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }, \"Qu\\u1EADn/Huy\\u1EC7n\"), /*#__PURE__*/React.createElement(Select, {\n    value: selectedDist.ID,\n    onChange: handleChangeDistrict,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, listDistricts.map(district => /*#__PURE__*/React.createElement(Option, {\n    key: district.ID,\n    value: district.ID,\n    \"data-url\": district.SolrID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 15\n    }\n  }, district.Title)))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, \"Ph\\u01B0\\u1EDDng/X\\xE3\"), /*#__PURE__*/React.createElement(Select, {\n    value: selectedWard.ID,\n    onChange: handleChangeWard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 11\n    }\n  }, listWards.map(ward => /*#__PURE__*/React.createElement(Option, {\n    key: ward.ID,\n    value: ward.ID,\n    \"data-url\": ward.SolrID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 15\n    }\n  }, ward.Title)))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Required, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }\n  }, \"\\u0110\\u01B0\\u1EDDng, s\\u1ED1 nh\\xE0\")), /*#__PURE__*/React.createElement(Input, {\n    id: \"address\",\n    name: \"apartment\",\n    value: address,\n    onChange: e => {\n      save({\n        address: e.target.value\n      });\n      setAddress(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(FormInline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Required, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  }, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i*\")), /*#__PURE__*/React.createElement(Input, {\n    name: \"phone\",\n    id: \"phone\",\n    value: phone,\n    onChange: e => {\n      save({\n        phone: e.target.value\n      });\n      setPhone(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Required, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 15\n    }\n  }, \"Email*\")), /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    name: \"email\",\n    value: email,\n    onChange: e => {\n      save({\n        email: e.target.value || email\n      });\n      setEmail(e.target.value);\n    },\n    disabled: disabledEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Editable, {\n    onClick: () => setDisabledEmail(!disabledEmail),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FiEdit, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(PaymentInputsWrapper, Object.assign({}, wrapperProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"svg\", Object.assign({}, getCardImageProps({\n    images\n  }), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getCardNumberProps({\n    onChange: handleChangeCardNumber\n  }), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getExpiryDateProps({\n    onChange: handleChangeExpiryDate\n  }), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getCVCProps({\n    onChange: handleChangeCVC\n  }), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 11\n    }\n  })))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  user: selectCurrentUser,\n  register: selectRegisterForm\n});\n\nconst mapDispatchToProps = dispatch => ({\n  save: obj => dispatch(saveRegisterForm(obj))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm);","map":{"version":3,"sources":["/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Seller/register-form/register-form.component.jsx"],"names":["React","useState","useEffect","useContext","useRef","Form","FormInline","FormGroup","Label","Input","Required","Select","Option","Editable","AppContext","connect","createStructuredSelector","selectCurrentUser","PaymentInputsWrapper","usePaymentInputs","images","getListCities","getListDistricts","getListWards","selectRegisterForm","FiEdit","saveRegisterForm","RegisterForm","user","register","setDisabledNext","save","scroll","address","cardNumber","cvc","disabledEmail","expiryDate","firstName","lastName","phone","selectedCity","selectedDist","selectedWard","wrapperProps","getCardImageProps","getCardNumberProps","getExpiryDateProps","getCVCProps","email","listCities","setListCites","listDistricts","setListDistricts","listWards","setListWards","mobileView","setMobileView","window","innerWidth","error","setError","tabletView","setTabletView","formRef","scrollTo","top","behavior","width","_mounted","then","ID","Title","status","catch","err","handleChangeCity","e","index","nativeEvent","target","selectedIndex","setSelectedCity","value","SolrID","childNodes","dataset","url","text","setSelectedDist","setSelectedWard","data","handleChangeDistrict","selectedDistrict","handleChangeWard","handleChangeCardNumber","setCardNumber","handleChangeExpiryDate","console","log","setExpiryDate","handleChangeCVC","setCvc","color","setFirstName","setLastName","map","city","district","ward","setAddress","setPhone","setEmail","setDisabledEmail","onChange","mapStateToProps","mapDispatchToProps","dispatch","obj"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,EAAiDC,MAAjD,QAA+D,OAA/D;AACA,SACEC,IADF,EAEEC,UAFF,EAGEC,SAHF,EAIEC,KAJF,EAKEC,KALF,EAMEC,QANF,EAOEC,MAPF,EAQEC,MARF,EASEC,QATF,QAUO,wBAVP;AAWA,OAAOC,UAAP,MAAuB,uCAAvB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,SAASC,iBAAT,QAAkC,oCAAlC;AACA,SAASC,oBAAT,EAA+BC,gBAA/B,QAAuD,sBAAvD;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,SACEC,aADF,EAEEC,gBAFF,EAGEC,YAHF,QAIO,2BAJP;AAKA,SAASC,kBAAT,QAAmC,wCAAnC;AACA,SAASC,MAAT,QAAuB,gBAAvB;AACA,SAASC,gBAAT,QAAiC,sCAAjC;;AACA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,QAAR;AAAkBC,EAAAA,eAAlB;AAAmCC,EAAAA,IAAnC;AAAyCC,EAAAA;AAAzC,CAAD,KAAuD;AAC1E,QAAM;AAACC,IAAAA,OAAD;AAAUC,IAAAA,UAAV;AAAsBC,IAAAA,GAAtB;AAA2BC,IAAAA,aAA3B;AAA0CC,IAAAA,UAA1C;AAAsDC,IAAAA,SAAtD;AAAiEC,IAAAA,QAAjE;AAA2EC,IAAAA,KAA3E;AAAkFC,IAAAA,YAAlF;AAA+FC,IAAAA,YAA/F;AAA6GC,IAAAA;AAA7G,MAA6Hd,QAAnI;AACA,QAAM;AACJe,IAAAA,YADI;AAEJC,IAAAA,iBAFI;AAGJC,IAAAA,kBAHI;AAIJC,IAAAA,kBAJI;AAKJC,IAAAA;AALI,MAMF7B,gBAAgB,EANpB;AAOAjB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAG0B,IAAH,EAAQ;AACNG,MAAAA,IAAI,CAAC;AAACkB,QAAAA,KAAK,EAAGrB,IAAI,CAACqB;AAAd,OAAD,CAAJ;AACD;AACF,GAJQ,EAIN,CAACrB,IAAD,CAJM,CAAT;AAKA,QAAM,CAACsB,UAAD,EAAaC,YAAb,IAA6BlD,QAAQ,CAAC,EAAD,CAA3C;AACA,QAAM,CAACmD,aAAD,EAAgBC,gBAAhB,IAAoCpD,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACqD,SAAD,EAAYC,YAAZ,IAA4BtD,QAAQ,CAAC,EAAD,CAA1C,CAhB0E,CAiB1E;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;;AACA,QAAM,CAACuD,UAAD,EAAaC,aAAb,IAA8BxD,QAAQ,CAACyD,MAAM,CAACC,UAAP,GAAoB,GAArB,CAA5C,CA3B0E,CA4B1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB5D,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAAC6D,UAAD,EAAaC,aAAb,IAA8B9D,QAAQ,CAC1CyD,MAAM,CAACC,UAAP,GAAoB,GAApB,IAA2BD,MAAM,CAACC,UAAP,IAAqB,GADN,CAA5C;AAGA,QAAMK,OAAO,GAAG5D,MAAM,CAAC,IAAD,CAAtB;AACAF,EAAAA,SAAS,CAAC,MAAM;AACdwD,IAAAA,MAAM,CAACO,QAAP,CAAgB;AACdC,MAAAA,GAAG,EAAGlC,MADQ;AAEdmC,MAAAA,QAAQ,EAAG;AAFG,KAAhB;AAID,GALQ,EAKN,CAACnC,MAAD,CALM,CAAT;AAMA,QAAMoC,KAAK,GAAGjE,UAAU,CAACW,UAAD,CAAxB;AACAZ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIkE,KAAK,GAAG,GAAZ,EAAiB;AACfX,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD,KAFD,MAEO;AACLA,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD;;AACD,QAAIW,KAAK,GAAG,GAAR,IAAeA,KAAK,IAAI,GAA5B,EAAiC;AAC/BL,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD,KAFD,MAEO;AACLA,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD;AACF,GAXQ,EAWN,CAACK,KAAD,CAXM,CAAT;AAaAlE,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImE,QAAQ,GAAG,IAAf;AACAhD,IAAAA,aAAa,GACViD,IADH,CACSpB,UAAD,IAAgB;AACpB,UAAImB,QAAJ,EAAc;AACZlB,QAAAA,YAAY,CAAC,CACX;AAAEoB,UAAAA,EAAE,EAAE,EAAN;AAAUC,UAAAA,KAAK,EAAE,gBAAjB;AAAmCC,UAAAA,MAAM,EAAE;AAA3C,SADW,EAEX,GAAGvB,UAFQ,CAAD,CAAZ;AAID;AACF,KARH,EASGwB,KATH,CASUC,GAAD,IAAS;AACd,UAAIN,QAAJ,EAAc;AACZR,QAAAA,QAAQ,CAACc,GAAD,CAAR;AACD;AACF,KAbH;AAcA,WAAO,MAAON,QAAQ,GAAG,KAAzB;AACD,GAjBQ,EAiBN,CAAChD,aAAD,CAjBM,CAAT;AAmBAnB,EAAAA,SAAS,CAAC,MAAM;AACd,QACEoC,SAAS,IACTC,QADA,IAEAE,YAFA,IAGAC,YAHA,IAIAC,YAJA,IAKAV,OALA,IAMAO,KANA,IAOAS,KAPA,IAQAf,UARA,IASAG,UATA,IAUAF,GAXF,EAYE;AACAL,MAAAA,eAAe,CAAC,KAAD,CAAf;AACD,KAdD,MAcO;AACLA,MAAAA,eAAe,CAAC,IAAD,CAAf;AACD;;AACDA,IAAAA,eAAe,CAAC,IAAD,CAAf;AACD,GAnBQ,EAmBN,CACDQ,SADC,EAEDC,QAFC,EAGDE,YAHC,EAIDC,YAJC,EAKDC,YALC,EAMDV,OANC,EAODO,KAPC,EAQDS,KARC,EASDf,UATC,EAUDG,UAVC,EAWDF,GAXC,CAnBM,CAAT;;AAiCA,QAAMyC,gBAAgB,GAAIC,CAAD,IAAO;AAC9B,UAAMC,KAAK,GAAGD,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBC,aAAnC;AACAC,IAAAA,eAAe,CAAC;AACdX,MAAAA,EAAE,EAAEM,CAAC,CAACG,MAAF,CAASG,KADC;AAEdC,MAAAA,MAAM,EAAEP,CAAC,CAACG,MAAF,CAASK,UAAT,CAAoBP,KAApB,EAA2BQ,OAA3B,CAAmCC,GAF7B;AAGdf,MAAAA,KAAK,EAAEK,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBF,KAArB,EAA4BU;AAHrB,KAAD,CAAf;AAKAzD,IAAAA,IAAI,CAAC;AACHU,MAAAA,YAAY,EAAE;AACZ8B,QAAAA,EAAE,EAAEM,CAAC,CAACG,MAAF,CAASG,KADD;AAEZC,QAAAA,MAAM,EAAEP,CAAC,CAACG,MAAF,CAASK,UAAT,CAAoBP,KAApB,EAA2BQ,OAA3B,CAAmCC,GAF/B;AAGZf,QAAAA,KAAK,EAAEK,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBF,KAArB,EAA4BU;AAHvB;AADX,KAAD,CAAJ;AAOAC,IAAAA,eAAe,CAAC;AACdlB,MAAAA,EAAE,EAAE,EADU;AAEda,MAAAA,MAAM,EAAC,EAFO;AAGdZ,MAAAA,KAAK,EAAE;AAHO,KAAD,CAAf;AAKAkB,IAAAA,eAAe,CAAC;AACdnB,MAAAA,EAAE,EAAE,EADU;AAEda,MAAAA,MAAM,EAAC,EAFO;AAGdZ,MAAAA,KAAK,EAAE;AAHO,KAAD,CAAf;AAKAjB,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAjC,IAAAA,gBAAgB,CAACuD,CAAC,CAACG,MAAF,CAASG,KAAV,CAAhB,CACGb,IADH,CACSqB,IAAD,IAAU;AACdtC,MAAAA,gBAAgB,CAAC,CAAC;AAAEkB,QAAAA,EAAE,EAAE,EAAN;AAAUC,QAAAA,KAAK,EAAE,iBAAjB;AAAoCC,QAAAA,MAAM,EAAE;AAA5C,OAAD,EAA2D,GAAGkB,IAA9D,CAAD,CAAhB;AACD,KAHH,EAIGjB,KAJH,CAIUC,GAAD,IAAS;AACdd,MAAAA,QAAQ,CAACc,GAAD,CAAR;AACD,KANH;AAOD,GAhCD;;AAkCA,QAAMiB,oBAAoB,GAAIf,CAAD,IAAO;AAClC,UAAMC,KAAK,GAAGD,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBC,aAAnC;AACAQ,IAAAA,eAAe,CAAC;AACdI,MAAAA,gBAAgB,EAAE;AAChBtB,QAAAA,EAAE,EAAEM,CAAC,CAACG,MAAF,CAASG,KADG;AAEhBC,QAAAA,MAAM,EAAEP,CAAC,CAACG,MAAF,CAASK,UAAT,CAAoBP,KAApB,EAA2BQ,OAA3B,CAAmCC,GAF3B;AAGhBf,QAAAA,KAAK,EAAEK,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBF,KAArB,EAA4BU;AAHnB;AADJ,KAAD,CAAf;AAOAE,IAAAA,eAAe,CAAC;AACdnB,MAAAA,EAAE,EAAE,EADU;AAEda,MAAAA,MAAM,EAAC,EAFO;AAGdZ,MAAAA,KAAK,EAAE;AAHO,KAAD,CAAf;AAKAzC,IAAAA,IAAI,CAAC;AACHW,MAAAA,YAAY,EAAE;AACZ6B,QAAAA,EAAE,EAAEM,CAAC,CAACG,MAAF,CAASG,KADD;AAEZC,QAAAA,MAAM,EAAEP,CAAC,CAACG,MAAF,CAASK,UAAT,CAAoBP,KAApB,EAA2BQ,OAA3B,CAAmCC,GAF/B;AAGZf,QAAAA,KAAK,EAAEK,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBF,KAArB,EAA4BU;AAHvB;AADX,KAAD,CAAJ;AAOAjE,IAAAA,YAAY,CAACsD,CAAC,CAACG,MAAF,CAASG,KAAV,CAAZ,CACGb,IADH,CACSqB,IAAD,IAAUpC,YAAY,CAAC,CAAC;AAAEgB,MAAAA,EAAE,EAAE,EAAN;AAAUC,MAAAA,KAAK,EAAE,iBAAjB;AAAoCC,MAAAA,MAAM,EAAE;AAA5C,KAAD,EAA2D,GAAGkB,IAA9D,CAAD,CAD9B,EAEGjB,KAFH,CAEUC,GAAD,IAASd,QAAQ,CAACc,GAAD,CAF1B;AAGD,GAxBD;;AAyBA,QAAMmB,gBAAgB,GAAIjB,CAAD,IAAO;AAC9B,UAAMC,KAAK,GAAGD,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBC,aAAnC;AACAS,IAAAA,eAAe,CAAC;AACdnB,MAAAA,EAAE,EAAEM,CAAC,CAACG,MAAF,CAASG,KADC;AAEdC,MAAAA,MAAM,EAAEP,CAAC,CAACG,MAAF,CAASK,UAAT,CAAoBP,KAApB,EAA2BQ,OAA3B,CAAmCC,GAF7B;AAGdf,MAAAA,KAAK,EAAEK,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBF,KAArB,EAA4BU;AAHrB,KAAD,CAAf;AAKAzD,IAAAA,IAAI,CAAC;AACHY,MAAAA,YAAY,EAAE;AACZ4B,QAAAA,EAAE,EAAEM,CAAC,CAACG,MAAF,CAASG,KADD;AAEZC,QAAAA,MAAM,EAAEP,CAAC,CAACG,MAAF,CAASK,UAAT,CAAoBP,KAApB,EAA2BQ,OAA3B,CAAmCC,GAF/B;AAGZf,QAAAA,KAAK,EAAEK,CAAC,CAACE,WAAF,CAAcC,MAAd,CAAqBF,KAArB,EAA4BU;AAHvB;AADX,KAAD,CAAJ;AAOD,GAdD;;AAgBA,QAAMO,sBAAsB,GAAIlB,CAAD,IAAO;AACpCmB,IAAAA,aAAa,CAACnB,CAAC,CAACG,MAAF,CAASG,KAAV,CAAb;AACApD,IAAAA,IAAI,CAAC;AAACG,MAAAA,UAAU,EAAG2C,CAAC,CAACG,MAAF,CAASG;AAAvB,KAAD,CAAJ;AACD,GAHD;;AAIA,QAAMc,sBAAsB,GAAIpB,CAAD,IAAO;AACpCqB,IAAAA,OAAO,CAACC,GAAR,CAAYtB,CAAC,CAACG,MAAF,CAASG,KAArB;AACAiB,IAAAA,aAAa,CAACvB,CAAC,CAACG,MAAF,CAASG,KAAV,CAAb;AACApD,IAAAA,IAAI,CAAC;AAACM,MAAAA,UAAU,EAAGwC,CAAC,CAACG,MAAF,CAASG;AAAvB,KAAD,CAAJ;AACD,GAJD;;AAKA,QAAMkB,eAAe,GAAIxB,CAAD,IAAO;AAC7ByB,IAAAA,MAAM,CAACzB,CAAC,CAACG,MAAF,CAASG,KAAV,CAAN;AACApD,IAAAA,IAAI,CAAC;AAACI,MAAAA,GAAG,EAAG0C,CAAC,CAACG,MAAF,CAASG;AAAhB,KAAD,CAAJ;AACD,GAHD;;AAIA,sBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,UAAU,EAAE3B,UAAlB;AAA8B,IAAA,UAAU,EAAEM,UAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,KAAK,iBAAI;AAAK,IAAA,KAAK,EAAE;AAAE2C,MAAAA,KAAK,EAAE;AAAT,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+B3C,KAA/B,CADZ,eAEE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,eAIE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,YADP;AAEE,IAAA,EAAE,EAAC,YAFL;AAGE,IAAA,KAAK,EAAEtB,SAHT;AAIE,IAAA,QAAQ,EAAGuC,CAAD,IAAO;AACf9C,MAAAA,IAAI,CAAC;AAACO,QAAAA,SAAS,EAAGuC,CAAC,CAACG,MAAF,CAASG;AAAtB,OAAD,CAAJ;AACAqB,MAAAA,YAAY,CAAC3B,CAAC,CAACG,MAAF,CAASG,KAAV,CAAZ;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF,eAeE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CADF,eAIE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,WADP;AAEE,IAAA,EAAE,EAAC,WAFL;AAGE,IAAA,KAAK,EAAE5C,QAHT;AAIE,IAAA,QAAQ,EAAGsC,CAAD,IAAO;AACf9C,MAAAA,IAAI,CAAC;AAAEQ,QAAAA,QAAQ,EAAGsC,CAAC,CAACG,MAAF,CAASG;AAAtB,OAAD,CAAJ;AACAsB,MAAAA,WAAW,CAAC5B,CAAC,CAACG,MAAF,CAASG,KAAV,CAAX;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAfF,CAFF,eAgCE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAE1C,YAAY,CAAC8B,EAA5B;AAAgC,IAAA,QAAQ,EAAEK,gBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG1B,UAAU,CAACwD,GAAX,CAAgBC,IAAD,iBACd,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAEA,IAAI,CAACpC,EAAlB;AAAsB,IAAA,KAAK,EAAEoC,IAAI,CAACpC,EAAlC;AAAsC,gBAAUoC,IAAI,CAACvB,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGuB,IAAI,CAACnC,KADR,CADD,CADH,CAFF,CAhCF,eA0CE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAEE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAE9B,YAAY,CAAC6B,EAA5B;AAAgC,IAAA,QAAQ,EAAEqB,oBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGxC,aAAa,CAACsD,GAAd,CAAmBE,QAAD,iBACjB,oBAAC,MAAD;AACE,IAAA,GAAG,EAAEA,QAAQ,CAACrC,EADhB;AAEE,IAAA,KAAK,EAAEqC,QAAQ,CAACrC,EAFlB;AAGE,gBAAUqC,QAAQ,CAACxB,MAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGwB,QAAQ,CAACpC,KALZ,CADD,CADH,CAFF,CA1CF,eAwDE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAE7B,YAAY,CAAC4B,EAA5B;AAAgC,IAAA,QAAQ,EAAEuB,gBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGxC,SAAS,CAACoD,GAAV,CAAeG,IAAD,iBACb,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAEA,IAAI,CAACtC,EAAlB;AAAsB,IAAA,KAAK,EAAEsC,IAAI,CAACtC,EAAlC;AAAsC,gBAAUsC,IAAI,CAACzB,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGyB,IAAI,CAACrC,KADR,CADD,CADH,CAFF,CAxDF,eAmEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADF,CADF,eAIE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,SADL;AAEE,IAAA,IAAI,EAAC,WAFP;AAGE,IAAA,KAAK,EAAEvC,OAHT;AAIE,IAAA,QAAQ,EAAG4C,CAAD,IAAO;AACf9C,MAAAA,IAAI,CAAC;AAAEE,QAAAA,OAAO,EAAE4C,CAAC,CAACG,MAAF,CAASG;AAApB,OAAD,CAAJ;AACA2B,MAAAA,UAAU,CAACjC,CAAC,CAACG,MAAF,CAASG,KAAV,CAAV;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAnEF,eAiFE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CADF,CADF,eAIE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,EAAE,EAAC,OAFL;AAGE,IAAA,KAAK,EAAE3C,KAHT;AAIE,IAAA,QAAQ,EAAGqC,CAAD,IAAO;AACf9C,MAAAA,IAAI,CAAC;AAAES,QAAAA,KAAK,EAAEqC,CAAC,CAACG,MAAF,CAASG;AAAlB,OAAD,CAAJ;AACA4B,MAAAA,QAAQ,CAAClC,CAAC,CAACG,MAAF,CAASG,KAAV,CAAR;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF,eAeE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,eAIE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,OADL;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAElC,KAHT;AAIE,IAAA,QAAQ,EAAG4B,CAAD,IAAO;AACf9C,MAAAA,IAAI,CAAC;AAAEkB,QAAAA,KAAK,EAAE4B,CAAC,CAACG,MAAF,CAASG,KAAT,IAAkBlC;AAA3B,OAAD,CAAJ;AACA+D,MAAAA,QAAQ,CAACnC,CAAC,CAACG,MAAF,CAASG,KAAV,CAAR;AACD,KAPH;AAQE,IAAA,QAAQ,EAAE/C,aARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAcE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAE,MAAM6E,gBAAgB,CAAC,CAAC7E,aAAF,CAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAdF,CAfF,CAjFF,eAmHE,oBAAC,oBAAD,oBAA0BQ,YAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACE,6CAASC,iBAAiB,CAAC;AAAEzB,IAAAA;AAAF,GAAD,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,eAEE,+CACM0B,kBAAkB,CAAC;AAAEoE,IAAAA,QAAQ,EAAEnB;AAAZ,GAAD,CADxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFF,eAKE,+CACMhD,kBAAkB,CAAC;AAAEmE,IAAAA,QAAQ,EAAEjB;AAAZ,GAAD,CADxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KALF,eAQE,+CAAWjD,WAAW,CAAC;AAAEkE,IAAAA,QAAQ,EAAEb;AAAZ,GAAD,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KARF,CAnHF,CADF,CADF;AAkID,CArVD;;AAsVA,MAAMc,eAAe,GAAGnG,wBAAwB,CAAC;AAC/CY,EAAAA,IAAI,EAAEX,iBADyC;AAE/CY,EAAAA,QAAQ,EAAEL;AAFqC,CAAD,CAAhD;;AAIA,MAAM4F,kBAAkB,GAAIC,QAAD,KAAe;AACxCtF,EAAAA,IAAI,EAAGuF,GAAD,IAASD,QAAQ,CAAC3F,gBAAgB,CAAC4F,GAAD,CAAjB;AADiB,CAAf,CAA3B;;AAGA,eAAevG,OAAO,CAACoG,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CzF,YAA7C,CAAf","sourcesContent":["import React, { useState, useEffect, useContext, useRef } from \"react\";\nimport {\n  Form,\n  FormInline,\n  FormGroup,\n  Label,\n  Input,\n  Required,\n  Select,\n  Option,\n  Editable,\n} from \"./register-form.styles\";\nimport AppContext from \"../../../context/app-viewport.context\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { PaymentInputsWrapper, usePaymentInputs } from \"react-payment-inputs\";\nimport images from \"react-payment-inputs/images\";\nimport {\n  getListCities,\n  getListDistricts,\n  getListWards,\n} from \"../../../utils/algorithms\";\nimport { selectRegisterForm } from \"../../../redux/seller/seller.selectors\";\nimport { FiEdit } from \"react-icons/fi\";\nimport { saveRegisterForm } from \"../../../redux/seller/seller.actions\";\nconst RegisterForm = ({ user, register, setDisabledNext, save, scroll }) => {\n  const {address, cardNumber, cvc, disabledEmail, expiryDate, firstName, lastName, phone ,selectedCity,selectedDist, selectedWard} = register ;\n  const {\n    wrapperProps,\n    getCardImageProps,\n    getCardNumberProps,\n    getExpiryDateProps,\n    getCVCProps,\n  } = usePaymentInputs();\n  useEffect(() => {\n    if(user){\n      save({email : user.email});\n    }\n  }, [user]);\n  const [listCities, setListCites] = useState([]);\n  const [listDistricts, setListDistricts] = useState([]);\n  const [listWards, setListWards] = useState([]);\n  // const [cardNumber, setCardNumber] = useState(register.cardNumber || \"\");\n  // const [expiryDate, setExpiryDate] = useState(register.expiryDate || \"\");\n  // const [cvc, setCvc] = useState(register.cvc || \"\");\n  \n  \n  // const [firstName, setFirstName] = useState(register.firstName || \"\");\n  // const [lastName, setLastName] = useState(register.lastName || \"\");\n  // const [address, setAddress] = useState(register.address || \"\");\n  // const [phone, setPhone] = useState(register.phone || \"\");\n  // const [email, setEmail] = useState(user.email);\n  const [mobileView, setMobileView] = useState(window.innerWidth < 600);\n  // const [disabledEmail, setDisabledEmail] = useState(\n  //   register.disabledEmail || true\n  // );\n  // const [selectedCity, setSelectedCity] = useState({\n  //   ID: register.selectedCity.ID || \"\",\n  //   SolrID: register.selectedCity.SolrID || \"\",\n  //   Title: register.selectedCity.Title || \"\",\n  // });\n  // const [selectedDist, setSelectedDist] = useState({\n  //   ID: register.selectedDist.ID || \"\",\n  //   SolrID: register.selectedDist.SolrID || \"\",\n  //   Title: register.selectedDist.Title || \"\",\n  // });\n  // const [selectedWard, setSelectedWard] = useState({\n  //   ID: register.selectedWard.ID || \"\",\n  //   SolrID: register.selectedWard.SolrID || \"\",\n  //   Title: register.selectedWard.Title || \"\",\n  // });\n  const [error, setError] = useState(null);\n  const [tabletView, setTabletView] = useState(\n    window.innerWidth < 992 && window.innerWidth >= 660\n  );\n  const formRef = useRef(null);\n  useEffect(() => {\n    window.scrollTo({\n      top : scroll, \n      behavior : \"smooth\"\n    })\n  }, [scroll])\n  const width = useContext(AppContext);\n  useEffect(() => {\n    if (width < 660) {\n      setMobileView(true);\n    } else {\n      setMobileView(false);\n    }\n    if (width < 992 && width >= 660) {\n      setTabletView(true);\n    } else {\n      setTabletView(false);\n    }\n  }, [width]);\n\n  useEffect(() => {\n    let _mounted = true;\n    getListCities()\n      .then((listCities) => {\n        if (_mounted) {\n          setListCites([\n            { ID: \"\", Title: \"Chọn thành phố\", status: \"disabled\" },\n            ...listCities,\n          ]);\n        }\n      })\n      .catch((err) => {\n        if (_mounted) {\n          setError(err);\n        }\n      });\n    return () => (_mounted = false);\n  }, [getListCities]);\n\n  useEffect(() => {\n    if (\n      firstName &&\n      lastName &&\n      selectedCity &&\n      selectedDist &&\n      selectedWard &&\n      address &&\n      phone &&\n      email &&\n      cardNumber &&\n      expiryDate &&\n      cvc\n    ) {\n      setDisabledNext(false);\n    } else {\n      setDisabledNext(true);\n    }\n    setDisabledNext(true);\n  }, [\n    firstName,\n    lastName,\n    selectedCity,\n    selectedDist,\n    selectedWard,\n    address,\n    phone,\n    email,\n    cardNumber,\n    expiryDate,\n    cvc,\n  ]);\n\n  const handleChangeCity = (e) => {\n    const index = e.nativeEvent.target.selectedIndex;\n    setSelectedCity({\n      ID: e.target.value,\n      SolrID: e.target.childNodes[index].dataset.url,\n      Title: e.nativeEvent.target[index].text,\n    });\n    save({\n      selectedCity: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text,\n      },\n    });\n    setSelectedDist({\n      ID: \"\",\n      SolrID:\"\",\n      Title: \"\",\n    })\n    setSelectedWard({\n      ID: \"\",\n      SolrID:\"\",\n      Title: \"\",\n    })\n    setListWards([]);\n    getListDistricts(e.target.value)\n      .then((data) => {\n        setListDistricts([{ ID: \"\", Title: \"Chọn Quận Huyện\", status: \"disabled\" }, ...data]);\n      })\n      .catch((err) => {\n        setError(err);\n      });\n  };\n\n  const handleChangeDistrict = (e) => {\n    const index = e.nativeEvent.target.selectedIndex;\n    setSelectedDist({\n      selectedDistrict: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text,\n      },\n    });\n    setSelectedWard({\n      ID: \"\",\n      SolrID:\"\",\n      Title: \"\",\n    })\n    save({\n      selectedDist: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text,\n      },\n    });\n    getListWards(e.target.value)\n      .then((data) => setListWards([{ ID: \"\", Title: \"Chọn Phường, Xã\", status: \"disabled\" }, ...data] ))\n      .catch((err) => setError(err));\n  };\n  const handleChangeWard = (e) => {\n    const index = e.nativeEvent.target.selectedIndex;\n    setSelectedWard({\n      ID: e.target.value,\n      SolrID: e.target.childNodes[index].dataset.url,\n      Title: e.nativeEvent.target[index].text,\n    });\n    save({\n      selectedWard: {\n        ID: e.target.value,\n        SolrID: e.target.childNodes[index].dataset.url,\n        Title: e.nativeEvent.target[index].text,\n      },\n    });\n  };\n\n  const handleChangeCardNumber = (e) => {\n    setCardNumber(e.target.value);\n    save({cardNumber : e.target.value})\n  };\n  const handleChangeExpiryDate = (e) => {\n    console.log(e.target.value)\n    setExpiryDate(e.target.value);\n    save({expiryDate : e.target.value});\n  };\n  const handleChangeCVC = (e) => {\n    setCvc(e.target.value);\n    save({cvc : e.target.value})\n  };\n  return (\n    <React.Fragment>\n      <Form mobileView={mobileView} tabletView={tabletView}>\n        {error && <div style={{ color: \"red\" }}>{error}</div>}\n        <FormInline>\n          <FormGroup>\n            <Label htmlFor=\"first_name\">\n              <Required>Họ*</Required>\n            </Label>\n            <Input\n              name=\"first_name\"\n              id=\"first_name\"\n              value={firstName}\n              onChange={(e) => {\n                save({firstName : e.target.value});\n                setFirstName(e.target.value);\n              }}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label htmlFor=\"last_name\">\n              <Required>Tên*</Required>\n            </Label>\n            <Input\n              name=\"last_name\"\n              id=\"last_name\"\n              value={lastName}\n              onChange={(e) => {\n                save({ lastName : e.target.value});\n                setLastName(e.target.value);\n              }}\n            />\n          </FormGroup>\n        </FormInline>\n        <FormGroup>\n          <Label>Thành phố</Label>\n          <Select valie={selectedCity.ID} onChange={handleChangeCity}>\n            {listCities.map((city) => (\n              <Option key={city.ID} value={city.ID} data-url={city.SolrID}>\n                {city.Title}\n              </Option>\n            ))}\n          </Select>\n        </FormGroup>\n        <FormGroup>\n          <Label>Quận/Huyện</Label>\n          <Select value={selectedDist.ID} onChange={handleChangeDistrict}>\n            {listDistricts.map((district) => (\n              <Option\n                key={district.ID}\n                value={district.ID}\n                data-url={district.SolrID}\n              >\n                {district.Title}\n              </Option>\n            ))}\n          </Select>\n        </FormGroup>\n        <FormGroup>\n          <Label>Phường/Xã</Label>\n          <Select value={selectedWard.ID} onChange={handleChangeWard}>\n            {listWards.map((ward) => (\n              <Option key={ward.ID} value={ward.ID} data-url={ward.SolrID}>\n                {ward.Title}\n              </Option>\n            ))}\n          </Select>\n        </FormGroup>\n\n        <FormGroup>\n          <Label htmlFor=\"address\">\n            <Required>Đường, số nhà</Required>\n          </Label>\n          <Input\n            id=\"address\"\n            name=\"apartment\"\n            value={address}\n            onChange={(e) => {\n              save({ address: e.target.value });\n              setAddress(e.target.value);\n            }}\n          />\n        </FormGroup>\n        <FormInline>\n          <FormGroup>\n            <Label htmlFor=\"phone\">\n              <Required>Số điện thoại*</Required>\n            </Label>\n            <Input\n              name=\"phone\"\n              id=\"phone\"\n              value={phone}\n              onChange={(e) => {\n                save({ phone: e.target.value });\n                setPhone(e.target.value);\n              }}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label htmlFor=\"email\">\n              <Required>Email*</Required>\n            </Label>\n            <Input\n              id=\"email\"\n              name=\"email\"\n              value={email}\n              onChange={(e) => {\n                save({ email: e.target.value || email});\n                setEmail(e.target.value);\n              }}\n              disabled={disabledEmail}\n            />\n            <Editable onClick={() => setDisabledEmail(!disabledEmail)}>\n              <FiEdit />\n            </Editable>\n          </FormGroup>\n        </FormInline>\n        <PaymentInputsWrapper {...wrapperProps}>\n          <svg {...getCardImageProps({ images })} />\n          <input\n            {...getCardNumberProps({ onChange: handleChangeCardNumber })}\n          />\n          <input\n            {...getExpiryDateProps({ onChange: handleChangeExpiryDate })}\n          />\n          <input {...getCVCProps({ onChange: handleChangeCVC })} />\n        </PaymentInputsWrapper>\n      </Form>\n    </React.Fragment>\n  );\n};\nconst mapStateToProps = createStructuredSelector({\n  user: selectCurrentUser,\n  register: selectRegisterForm,\n});\nconst mapDispatchToProps = (dispatch) => ({\n  save: (obj) => dispatch(saveRegisterForm(obj)),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Reviews/product-reviews-overview/product-reviews-overview.component.jsx\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport AppContext from \"../../../context/app-viewport.context\";\nimport { ProductReviewsOverviewWrapper, Row, Grid, Image, TextArea, CompleteReview } from \"./product-reviews-overview.styles\";\nimport { selectProductReviewsItem } from \"../../../redux/product-reviews/product-reviews.selectors\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { Link } from \"react-router-dom\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport Button from \"@material-ui/core/Button\";\nimport HomeIcon from '@material-ui/icons/Home';\nimport Loader from \"../../UI/loader/loader.component\";\nimport { postReviewsProduct } from \"../../../utils/connectDB\";\nimport { withRouter } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    verticalAlign: \"center\"\n  }\n}));\n\nconst ProductReviewsOverview = ({\n  productReviews,\n  history\n}) => {\n  const classes = useStyles();\n  const [stars, setStars] = useState(0);\n  const [comment, setComment] = useState(\"\");\n  const [completeReview, setCompleteReview] = useState(false);\n  useEffect(() => {\n    if (productReviews.my_vote_review) {\n      setStars(productReviews.my_vote_review);\n    }\n  }, [productReviews]);\n  const [mobileView, setMobileView] = useState(window.innerWidth < 600);\n  const [tabletView, setTabletView] = useState(window.innerWidth < 992 && window.innerWidth >= 600);\n  const [loading, setLoading] = useState(false);\n  const [disabled, setDisabled] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    console.log(stars);\n\n    if (!comment && !stars) {\n      setDisabled(true);\n    } else {\n      setDisabled(false);\n    }\n  }, [comment, stars]);\n  const width = useContext(AppContext);\n  useEffect(() => {\n    if (width < 600) {\n      setMobileView(true);\n    } else {\n      setMobileView(false);\n    }\n\n    if (width < 992 && width >= 600) {\n      setTabletView(true);\n    } else {\n      setTabletView(false);\n    }\n  }, [width]);\n\n  const handleSendReviews = () => {\n    setLoading(true);\n    postReviewsProduct(productReviews._id, stars, comment).then(data => {\n      setCompleteReview(true);\n    }).catch(err => {\n      setError(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(ProductReviewsOverviewWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, completeReview ? /*#__PURE__*/React.createElement(CompleteReview, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"C\\xE1m \\u01A1n b\\u1EA1n s\\u1EF1 \\u0111\\xF3ng g\\xF3p c\\u1EE7a b\\u1EA1n v\\u1EC1 s\\u1EA3n ph\\u1EA9m.\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    startIcon: /*#__PURE__*/React.createElement(HomeIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 66\n      }\n    }),\n    onClick: () => history.push(\"/\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"Trang ch\\u1EE7\")) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, error ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"1.5rem auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"h4\", {\n    style: {\n      color: \"#dd2222\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, error)) : null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    width: 25,\n    mobileView: mobileView,\n    tabletView: tabletView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: `data:${productReviews.images[0].mimetype};base64,${productReviews.images[0].data}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    witdh: 75,\n    mobileView: mobileView,\n    tabletView: tabletView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, productReviews.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, \"Ng\\u01B0\\u1EDDi \\u0111\\u0103ng SP :\", \" \", /*#__PURE__*/React.createElement(Link, {\n    to: `/user/${productReviews.user._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, `${productReviews.user.information.first_name} ${productReviews.user.information.last_name}`)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, \"Ng\\xE0y \\u0111\\u0103ng :\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, new Date(productReviews.createdAt).toLocaleString())), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, \"\\u0110\\xE1nh gi\\xE1 t\\u1EEB ng\\u01B0\\u1EDDi d\\xF9ng :\", \" \", productReviews.stars ? /*#__PURE__*/React.createElement(Rating, {\n    name: \"read-only\",\n    value: productReviews.stars,\n    readOnly: true,\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"#dd2222\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 23\n    }\n  }, \"Ch\\u01B0a c\\xF3 \\u0111\\xE1nh gi\\xE1\")))), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"\\u0110\\xE1nh gi\\xE1 s\\u1EA3n ph\\u1EA9m\"), /*#__PURE__*/React.createElement(Rating, {\n    name: \"half-rating\",\n    defaultValue: stars,\n    precision: 0.5,\n    onChange: e => setStars(e.target.value < 1 ? 1 : e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextArea, {\n    placeholder: \"\\u0110\\xF3ng g\\xF3p c\\u1EE7a b\\u1EA1n v\\u1EC1 s\\u1EA3n ph\\u1EA9m\",\n    onChange: e => setComment(e.target.value),\n    value: comment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      display: \"inline-block\"\n    },\n    disabled: disabled,\n    onClick: handleSendReviews,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, \"G\\u1EEDi \\u0111\\xE1nh gi\\xE1\")))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  productReviews: selectProductReviewsItem\n});\nexport default connect(mapStateToProps)(withRouter(ProductReviewsOverview));","map":{"version":3,"sources":["/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Reviews/product-reviews-overview/product-reviews-overview.component.jsx"],"names":["React","useState","useContext","useEffect","AppContext","ProductReviewsOverviewWrapper","Row","Grid","Image","TextArea","CompleteReview","selectProductReviewsItem","connect","createStructuredSelector","Link","Rating","Button","HomeIcon","Loader","postReviewsProduct","withRouter","makeStyles","useStyles","theme","root","display","verticalAlign","ProductReviewsOverview","productReviews","history","classes","stars","setStars","comment","setComment","completeReview","setCompleteReview","my_vote_review","mobileView","setMobileView","window","innerWidth","tabletView","setTabletView","loading","setLoading","disabled","setDisabled","error","setError","console","log","width","handleSendReviews","_id","then","data","catch","err","push","textAlign","margin","color","images","mimetype","name","user","information","first_name","last_name","Date","createdAt","toLocaleString","flexDirection","e","target","value","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport AppContext from \"../../../context/app-viewport.context\";\nimport {\n  ProductReviewsOverviewWrapper,\n  Row,\n  Grid,\n  Image,\n  TextArea,\n  CompleteReview\n} from \"./product-reviews-overview.styles\";\nimport { selectProductReviewsItem } from \"../../../redux/product-reviews/product-reviews.selectors\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { Link } from \"react-router-dom\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport Button from \"@material-ui/core/Button\";\nimport HomeIcon from '@material-ui/icons/Home';\nimport Loader from \"../../UI/loader/loader.component\";\nimport { postReviewsProduct } from \"../../../utils/connectDB\";\nimport {withRouter} from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    verticalAlign : \"center\"\n  },\n}));\nconst ProductReviewsOverview = ({ productReviews, history }) => {\n  const classes = useStyles();\n  const [stars, setStars] = useState(0);\n  const [comment, setComment] = useState(\"\");\n  const [completeReview, setCompleteReview] = useState(false);\n  useEffect(() => {\n    if (productReviews.my_vote_review) {\n      setStars(productReviews.my_vote_review);\n    }\n  }, [productReviews]);\n  const [mobileView, setMobileView] = useState(window.innerWidth < 600);\n  const [tabletView, setTabletView] = useState(\n    window.innerWidth < 992 && window.innerWidth >= 600\n  );\n  const [loading, setLoading] = useState(false);\n  const [disabled, setDisabled] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    console.log(stars);\n    if (!comment && !stars) {\n      setDisabled(true);\n    } else {\n      setDisabled(false);\n    }\n  }, [comment, stars]);\n  const width = useContext(AppContext);\n  useEffect(() => {\n    if (width < 600) {\n      setMobileView(true);\n    } else {\n      setMobileView(false);\n    }\n    if (width < 992 && width >= 600) {\n      setTabletView(true);\n    } else {\n      setTabletView(false);\n    }\n  }, [width]);\n\n  const handleSendReviews = () => {\n    setLoading(true);\n    postReviewsProduct(productReviews._id, stars, comment)\n      .then((data) => {\n        setCompleteReview(true);\n      })\n      .catch((err) => {\n        setError(err);\n      });\n  };\n  return (\n    <ProductReviewsOverviewWrapper>\n      {completeReview ? (\n        <CompleteReview>\n          <h3>Cám ơn bạn sự đóng góp của bạn về sản phẩm.</h3>\n          <Button variant=\"contained\" color=\"primary\" startIcon={<HomeIcon/>} onClick={() => history.push(\"/\")}>Trang chủ</Button>\n        </CompleteReview>\n      ) : (\n        <React.Fragment>\n          {loading ? (\n            <Loader />\n          ) : (\n            <React.Fragment>\n              {error ? (\n                <div style={{ textAlign: \"center\", margin: \"1.5rem auto\" }}>\n                  {\" \"}\n                  <h4 style={{ color: \"#dd2222\" }}>{error}</h4>\n                </div>\n              ) : null}\n              <Row>\n                <Grid\n                  width={25}\n                  mobileView={mobileView}\n                  tabletView={tabletView}\n                >\n                  <Image\n                    src={`data:${productReviews.images[0].mimetype};base64,${productReviews.images[0].data}`}\n                  />\n                </Grid>\n                <Grid\n                  witdh={75}\n                  mobileView={mobileView}\n                  tabletView={tabletView}\n                >\n                  <h3>{productReviews.name}</h3>\n                  <p>\n                    Người đăng SP :{\" \"}\n                    <Link\n                      to={`/user/${productReviews.user._id}`}\n                    >{`${productReviews.user.information.first_name} ${productReviews.user.information.last_name}`}</Link>\n                  </p>\n                  <p>\n                    Ngày đăng :{\" \"}\n                    <span>\n                      {new Date(productReviews.createdAt).toLocaleString()}\n                    </span>\n                  </p>\n                  <p>\n                    Đánh giá từ người dùng :{\" \"}\n                    {productReviews.stars ? (\n                      <Rating\n                        name=\"read-only\"\n                        value={productReviews.stars}\n                        readOnly\n                        className={classes.root}\n                      />\n                    ) : (\n                      <span style={{ color: \"#dd2222\" }}>Chưa có đánh giá</span>\n                    )}\n                  </p>\n                </Grid>\n              </Row>\n              <Row style={{ flexDirection: \"column\"}}>\n                <h3>Đánh giá sản phẩm</h3>\n                <Rating\n                  name=\"half-rating\"\n                  defaultValue={stars}\n                  precision={0.5}\n                  onChange={(e) =>\n                    setStars(e.target.value < 1 ? 1 : e.target.value)\n                  }                  \n                />\n                <TextArea\n                  placeholder=\"Đóng góp của bạn về sản phẩm\"\n                  onChange={(e) => setComment(e.target.value)}\n                  value={comment}\n                />\n              </Row>\n              <Row>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  style={{ display: \"inline-block\" }}\n                  disabled={disabled}\n                  onClick={handleSendReviews}\n                >\n                  Gửi đánh giá\n                </Button>\n              </Row>\n            </React.Fragment>\n          )}\n        </React.Fragment>\n      )}\n    </ProductReviewsOverviewWrapper>\n  );\n};\n\nconst mapStateToProps = createStructuredSelector({\n  productReviews: selectProductReviewsItem,\n});\nexport default connect(mapStateToProps)(withRouter(ProductReviewsOverview));\n"]},"metadata":{},"sourceType":"module"}
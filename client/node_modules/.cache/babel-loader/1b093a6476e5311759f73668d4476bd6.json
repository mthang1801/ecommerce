{"ast":null,"code":"import './utils/cardTypes-4f45f8d3.js';\nimport './utils/validator-0f41e23d.js';\nimport { b as _slicedToArray, c as _objectSpread, d as _defineProperty, e as _objectWithoutProperties } from './chunk-7eee66c0.js';\nimport './utils/formatter-b0b2372d.js';\nimport utils from './utils/index.js';\nimport React from 'react';\n\nfunction usePaymentCard() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$autoFocus = _ref.autoFocus,\n      autoFocus = _ref$autoFocus === void 0 ? true : _ref$autoFocus,\n      errorMessages = _ref.errorMessages,\n      onBlur = _ref.onBlur,\n      onChange = _ref.onChange,\n      onError = _ref.onError,\n      onTouch = _ref.onTouch,\n      cardNumberValidator = _ref.cardNumberValidator,\n      cvcValidator = _ref.cvcValidator,\n      expiryValidator = _ref.expiryValidator;\n\n  var cardNumberField = React.useRef();\n  var expiryDateField = React.useRef();\n  var cvcField = React.useRef();\n  var zipField = React.useRef();\n  /** ====== START: META STUFF ====== */\n\n  var _React$useState = React.useState({\n    cardNumber: false,\n    expiryDate: false,\n    cvc: false,\n    zip: false\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      touchedInputs = _React$useState2[0],\n      setTouchedInputs = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isTouched = _React$useState4[0],\n      setIsTouched = _React$useState4[1];\n\n  var _React$useState5 = React.useState({\n    cardNumber: undefined,\n    expiryDate: undefined,\n    cvc: undefined,\n    zip: undefined\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      erroredInputs = _React$useState6[0],\n      setErroredInputs = _React$useState6[1];\n\n  var _React$useState7 = React.useState(),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      error = _React$useState8[0],\n      setError = _React$useState8[1];\n\n  var _React$useState9 = React.useState(),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      cardType = _React$useState10[0],\n      setCardType = _React$useState10[1];\n\n  var _React$useState11 = React.useState(),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      focused = _React$useState12[0],\n      setFocused = _React$useState12[1];\n\n  var setInputError = React.useCallback(function (input, error) {\n    setErroredInputs(function (erroredInputs) {\n      if (erroredInputs[input] === error) return erroredInputs;\n      var newError = error;\n\n      var newErroredInputs = _objectSpread({}, erroredInputs, _defineProperty({}, input, error));\n\n      if (error) {\n        setError(error);\n      } else {\n        newError = Object.values(newErroredInputs).find(Boolean);\n        setError(newError);\n      }\n\n      onError && onError(newError, newErroredInputs);\n      return newErroredInputs;\n    });\n  }, []); // eslint-disable-line\n\n  var setInputTouched = React.useCallback(function (input, value) {\n    requestAnimationFrame(function () {\n      if (document.activeElement.tagName !== 'INPUT') {\n        setIsTouched(true);\n      } else if (value === false) {\n        setIsTouched(false);\n      }\n    });\n    setTouchedInputs(function (touchedInputs) {\n      if (touchedInputs[input] === value) return touchedInputs;\n\n      var newTouchedInputs = _objectSpread({}, touchedInputs, _defineProperty({}, input, value));\n\n      onTouch && onTouch(_defineProperty({}, input, value), newTouchedInputs);\n      return newTouchedInputs;\n    });\n  }, []); // eslint-disable-line\n\n  /** ====== END: META STUFF ====== */\n\n  /** ====== START: CARD NUMBER STUFF ====== */\n\n  var handleBlurCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('cardNumber', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var formattedCardNumber = e.target.value || '';\n      var cardNumber = formattedCardNumber.replace(/\\s/g, '');\n      var cursorPosition = cardNumberField.current.selectionStart;\n      var cardType = utils.cardTypes.getCardTypeByValue(cardNumber);\n      setCardType(cardType);\n      setInputTouched('cardNumber', false); // @ts-ignore\n\n      cardNumberField.current.value = utils.formatter.formatCardNumber(cardNumber);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e); // Due to the card number formatting, the selection cursor will fall to the end of\n      // the input field. Here, we want to reposition the cursor to the correct place.\n\n      requestAnimationFrame(function () {\n        if (document.activeElement !== cardNumberField.current) return;\n\n        if (cardNumberField.current.value[cursorPosition - 1] === ' ') {\n          cursorPosition = cursorPosition + 1;\n        }\n\n        cardNumberField.current.setSelectionRange(cursorPosition, cursorPosition);\n      });\n      var cardNumberError = utils.validator.getCardNumberError(cardNumber, cardNumberValidator, {\n        errorMessages: errorMessages\n      });\n\n      if (!cardNumberError && autoFocus) {\n        expiryDateField.current && expiryDateField.current.focus();\n      }\n\n      setInputError('cardNumber', cardNumberError);\n      props.onError && props.onError(cardNumberError);\n    };\n  }, [autoFocus, cardNumberValidator, errorMessages, onChange, setInputError, setInputTouched]);\n  var handleFocusCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('cardNumber');\n    };\n  }, []);\n  var handleKeyPressCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var formattedCardNumber = e.target.value || '';\n      var cardNumber = formattedCardNumber.replace(/\\s/g, '');\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n\n        if (utils.validator.hasCardNumberReachedMaxLength(cardNumber)) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getCardNumberProps = React.useCallback(function () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref2.refKey,\n        props = _objectWithoutProperties(_ref2, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      'aria-label': 'Card number',\n      autoComplete: 'cc-number',\n      id: 'cardNumber',\n      name: 'cardNumber',\n      placeholder: 'Card number',\n      type: 'tel'\n    }, refKey || 'ref', cardNumberField), props, {\n      onBlur: handleBlurCardNumber(props),\n      onChange: handleChangeCardNumber(props),\n      onFocus: handleFocusCardNumber(props),\n      onKeyPress: handleKeyPressCardNumber(props)\n    });\n  }, [handleBlurCardNumber, handleChangeCardNumber, handleFocusCardNumber, handleKeyPressCardNumber]);\n  /** ====== END: CARD NUMBER STUFF ====== */\n\n  /** ====== START: EXPIRY DATE STUFF ====== */\n\n  var handleBlurExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('expiryDate', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      setInputTouched('expiryDate', false);\n      expiryDateField.current.value = utils.formatter.formatExpiry(e);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e);\n      var expiryDateError = utils.validator.getExpiryDateError(expiryDateField.current.value, expiryValidator, {\n        errorMessages: errorMessages\n      });\n\n      if (!expiryDateError && autoFocus) {\n        cvcField.current && cvcField.current.focus();\n      }\n\n      setInputError('expiryDate', expiryDateError);\n      props.onError && props.onError(expiryDateError);\n    };\n  }, [autoFocus, errorMessages, expiryValidator, onChange, setInputError, setInputTouched]);\n  var handleFocusExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('expiryDate');\n    };\n  }, []);\n  var handleKeyDownExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyDown && props.onKeyDown(e);\n\n      if (e.key === utils.BACKSPACE_KEY_CODE && !e.target.value && autoFocus) {\n        cardNumberField.current && cardNumberField.current.focus();\n      }\n    };\n  }, [autoFocus]);\n  var handleKeyPressExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var formattedExpiryDate = e.target.value || '';\n      var expiryDate = formattedExpiryDate.replace(' / ', '');\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n\n        if (expiryDate.length >= 4) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getExpiryDateProps = React.useCallback(function () {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref3.refKey,\n        props = _objectWithoutProperties(_ref3, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      'aria-label': 'Expiry date in format MM YY',\n      autoComplete: 'cc-exp',\n      id: 'expiryDate',\n      name: 'expiryDate',\n      placeholder: 'MM/YY',\n      type: 'tel'\n    }, refKey || 'ref', expiryDateField), props, {\n      onBlur: handleBlurExpiryDate(props),\n      onChange: handleChangeExpiryDate(props),\n      onFocus: handleFocusExpiryDate(props),\n      onKeyDown: handleKeyDownExpiryDate(props),\n      onKeyPress: handleKeyPressExpiryDate(props)\n    });\n  }, [handleBlurExpiryDate, handleChangeExpiryDate, handleFocusExpiryDate, handleKeyDownExpiryDate, handleKeyPressExpiryDate]);\n  /** ====== END: EXPIRY DATE STUFF ====== */\n\n  /** ====== START: CVC STUFF ====== */\n\n  var handleBlurCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('cvc', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        cardType = _ref4.cardType;\n\n    return function (e) {\n      var cvc = e.target.value;\n      setInputTouched('cvc', false);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e);\n      var cvcError = utils.validator.getCVCError(cvc, cvcValidator, {\n        cardType: cardType,\n        errorMessages: errorMessages\n      });\n\n      if (!cvcError && autoFocus) {\n        zipField.current && zipField.current.focus();\n      }\n\n      setInputError('cvc', cvcError);\n      props.onError && props.onError(cvcError);\n    };\n  }, [autoFocus, cvcValidator, errorMessages, onChange, setInputError, setInputTouched]);\n  var handleFocusCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('cvc');\n    };\n  }, []);\n  var handleKeyDownCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyDown && props.onKeyDown(e);\n\n      if (e.key === utils.BACKSPACE_KEY_CODE && !e.target.value && autoFocus) {\n        expiryDateField.current && expiryDateField.current.focus();\n      }\n    };\n  }, [autoFocus]);\n  var handleKeyPressCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref5 = arguments.length > 1 ? arguments[1] : undefined,\n        cardType = _ref5.cardType;\n\n    return function (e) {\n      var formattedCVC = e.target.value || '';\n      var cvc = formattedCVC.replace(' / ', '');\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n\n        if (cardType && cvc.length >= cardType.code.length) {\n          e.preventDefault();\n        }\n\n        if (cvc.length >= 4) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getCVCProps = React.useCallback(function () {\n    var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref6.refKey,\n        props = _objectWithoutProperties(_ref6, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      'aria-label': 'CVC',\n      autoComplete: 'cc-csc',\n      id: 'cvc',\n      name: 'cvc',\n      placeholder: cardType ? cardType.code.name : 'CVC',\n      type: 'tel'\n    }, refKey || 'ref', cvcField), props, {\n      onBlur: handleBlurCVC(props),\n      onChange: handleChangeCVC(props, {\n        cardType: cardType\n      }),\n      onFocus: handleFocusCVC(props),\n      onKeyDown: handleKeyDownCVC(props),\n      onKeyPress: handleKeyPressCVC(props, {\n        cardType: cardType\n      })\n    });\n  }, [cardType, handleBlurCVC, handleChangeCVC, handleFocusCVC, handleKeyDownCVC, handleKeyPressCVC]);\n  /** ====== END: CVC STUFF ====== */\n\n  /** ====== START: ZIP STUFF ====== */\n\n  var handleBlurZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('zip', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var zip = e.target.value;\n      setInputTouched('zip', false);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e);\n      var zipError = utils.validator.getZIPError(zip, {\n        errorMessages: errorMessages\n      });\n      setInputError('zip', zipError);\n      props.onError && props.onError(zipError);\n    };\n  }, [errorMessages, onChange, setInputError, setInputTouched]);\n  var handleFocusZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('zip');\n    };\n  }, []);\n  var handleKeyDownZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyDown && props.onKeyDown(e);\n\n      if (e.key === utils.BACKSPACE_KEY_CODE && !e.target.value && autoFocus) {\n        cvcField.current && cvcField.current.focus();\n      }\n    };\n  }, [autoFocus]);\n  var handleKeyPressZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getZIPProps = React.useCallback(function () {\n    var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref7.refKey,\n        props = _objectWithoutProperties(_ref7, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      autoComplete: 'off',\n      id: 'zip',\n      maxLength: '6',\n      name: 'zip',\n      placeholder: 'ZIP',\n      type: 'tel'\n    }, refKey || 'ref', zipField), props, {\n      onBlur: handleBlurZIP(props),\n      onChange: handleChangeZIP(props),\n      onFocus: handleFocusZIP(props),\n      onKeyDown: handleKeyDownZIP(props),\n      onKeyPress: handleKeyPressZIP(props)\n    });\n  }, [handleBlurZIP, handleChangeZIP, handleFocusZIP, handleKeyDownZIP, handleKeyPressZIP]);\n  /** ====== END: ZIP STUFF ====== */\n\n  /** ====== START: CARD IMAGE STUFF ====== */\n\n  var getCardImageProps = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var images = props.images || {};\n    return _objectSpread({\n      'aria-label': cardType ? cardType.displayName : 'Placeholder card',\n      children: images[cardType ? cardType.type : 'placeholder'] || images.placeholder,\n      width: '1.5em',\n      height: '1em',\n      viewBox: '0 0 24 16'\n    }, props);\n  }, [cardType]);\n  /** ====== END: CARD IMAGE STUFF ====== */\n  // Set default field errors\n\n  React.useLayoutEffect(function () {\n    if (zipField.current) {\n      var zipError = utils.validator.getZIPError(zipField.current.value, {\n        errorMessages: errorMessages\n      });\n      setInputError('zip', zipError);\n    }\n\n    if (cvcField.current) {\n      var cvcError = utils.validator.getCVCError(cvcField.current.value, cvcValidator, {\n        errorMessages: errorMessages\n      });\n      setInputError('cvc', cvcError);\n    }\n\n    if (expiryDateField.current) {\n      var expiryDateError = utils.validator.getExpiryDateError(expiryDateField.current.value, expiryValidator, {\n        errorMessages: errorMessages\n      });\n      setInputError('expiryDate', expiryDateError);\n    }\n\n    if (cardNumberField.current) {\n      var cardNumberError = utils.validator.getCardNumberError(cardNumberField.current.value, cardNumberValidator, {\n        errorMessages: errorMessages\n      });\n      setInputError('cardNumber', cardNumberError);\n    }\n  }, [cardNumberValidator, cvcValidator, errorMessages, expiryValidator, setInputError]); // Format default values\n\n  React.useLayoutEffect(function () {\n    if (cardNumberField.current) {\n      cardNumberField.current.value = utils.formatter.formatCardNumber(cardNumberField.current.value);\n    }\n\n    if (expiryDateField.current) {\n      expiryDateField.current.value = utils.formatter.formatExpiry({\n        target: expiryDateField.current\n      });\n    }\n  }, []); // Set default card type\n\n  React.useLayoutEffect(function () {\n    if (cardNumberField.current) {\n      var _cardType = utils.cardTypes.getCardTypeByValue(cardNumberField.current.value);\n\n      setCardType(_cardType);\n    }\n  }, []);\n  return {\n    getCardImageProps: getCardImageProps,\n    getCardNumberProps: getCardNumberProps,\n    getExpiryDateProps: getExpiryDateProps,\n    getCVCProps: getCVCProps,\n    getZIPProps: getZIPProps,\n    wrapperProps: {\n      error: error,\n      focused: focused,\n      isTouched: isTouched\n    },\n    meta: {\n      cardType: cardType,\n      erroredInputs: erroredInputs,\n      error: error,\n      focused: focused,\n      isTouched: isTouched,\n      touchedInputs: touchedInputs\n    }\n  };\n}\n\nexport default usePaymentCard;","map":{"version":3,"sources":["/home/mvt/Desktop/projects/mern-stack/e-commerce/node_modules/react-payment-inputs/es/usePaymentInputs.js"],"names":["b","_slicedToArray","c","_objectSpread","d","_defineProperty","e","_objectWithoutProperties","utils","React","usePaymentCard","_ref","arguments","length","undefined","_ref$autoFocus","autoFocus","errorMessages","onBlur","onChange","onError","onTouch","cardNumberValidator","cvcValidator","expiryValidator","cardNumberField","useRef","expiryDateField","cvcField","zipField","_React$useState","useState","cardNumber","expiryDate","cvc","zip","_React$useState2","touchedInputs","setTouchedInputs","_React$useState3","_React$useState4","isTouched","setIsTouched","_React$useState5","_React$useState6","erroredInputs","setErroredInputs","_React$useState7","_React$useState8","error","setError","_React$useState9","_React$useState10","cardType","setCardType","_React$useState11","_React$useState12","focused","setFocused","setInputError","useCallback","input","newError","newErroredInputs","Object","values","find","Boolean","setInputTouched","value","requestAnimationFrame","document","activeElement","tagName","newTouchedInputs","handleBlurCardNumber","props","handleChangeCardNumber","formattedCardNumber","target","replace","cursorPosition","current","selectionStart","cardTypes","getCardTypeByValue","formatter","formatCardNumber","setSelectionRange","cardNumberError","validator","getCardNumberError","focus","handleFocusCardNumber","onFocus","handleKeyPressCardNumber","onKeyPress","key","ENTER_KEY_CODE","isNumeric","preventDefault","hasCardNumberReachedMaxLength","getCardNumberProps","_ref2","refKey","autoComplete","id","name","placeholder","type","handleBlurExpiryDate","handleChangeExpiryDate","formatExpiry","expiryDateError","getExpiryDateError","handleFocusExpiryDate","handleKeyDownExpiryDate","onKeyDown","BACKSPACE_KEY_CODE","handleKeyPressExpiryDate","formattedExpiryDate","getExpiryDateProps","_ref3","handleBlurCVC","handleChangeCVC","_ref4","cvcError","getCVCError","handleFocusCVC","handleKeyDownCVC","handleKeyPressCVC","_ref5","formattedCVC","code","getCVCProps","_ref6","handleBlurZIP","handleChangeZIP","zipError","getZIPError","handleFocusZIP","handleKeyDownZIP","handleKeyPressZIP","getZIPProps","_ref7","maxLength","getCardImageProps","images","displayName","children","width","height","viewBox","useLayoutEffect","_cardType","wrapperProps","meta"],"mappings":"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","sourcesContent":["import './utils/cardTypes-4f45f8d3.js';\nimport './utils/validator-0f41e23d.js';\nimport { b as _slicedToArray, c as _objectSpread, d as _defineProperty, e as _objectWithoutProperties } from './chunk-7eee66c0.js';\nimport './utils/formatter-b0b2372d.js';\nimport utils from './utils/index.js';\nimport React from 'react';\n\nfunction usePaymentCard() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$autoFocus = _ref.autoFocus,\n      autoFocus = _ref$autoFocus === void 0 ? true : _ref$autoFocus,\n      errorMessages = _ref.errorMessages,\n      onBlur = _ref.onBlur,\n      onChange = _ref.onChange,\n      onError = _ref.onError,\n      onTouch = _ref.onTouch,\n      cardNumberValidator = _ref.cardNumberValidator,\n      cvcValidator = _ref.cvcValidator,\n      expiryValidator = _ref.expiryValidator;\n\n  var cardNumberField = React.useRef();\n  var expiryDateField = React.useRef();\n  var cvcField = React.useRef();\n  var zipField = React.useRef();\n  /** ====== START: META STUFF ====== */\n\n  var _React$useState = React.useState({\n    cardNumber: false,\n    expiryDate: false,\n    cvc: false,\n    zip: false\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      touchedInputs = _React$useState2[0],\n      setTouchedInputs = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isTouched = _React$useState4[0],\n      setIsTouched = _React$useState4[1];\n\n  var _React$useState5 = React.useState({\n    cardNumber: undefined,\n    expiryDate: undefined,\n    cvc: undefined,\n    zip: undefined\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      erroredInputs = _React$useState6[0],\n      setErroredInputs = _React$useState6[1];\n\n  var _React$useState7 = React.useState(),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      error = _React$useState8[0],\n      setError = _React$useState8[1];\n\n  var _React$useState9 = React.useState(),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      cardType = _React$useState10[0],\n      setCardType = _React$useState10[1];\n\n  var _React$useState11 = React.useState(),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      focused = _React$useState12[0],\n      setFocused = _React$useState12[1];\n\n  var setInputError = React.useCallback(function (input, error) {\n    setErroredInputs(function (erroredInputs) {\n      if (erroredInputs[input] === error) return erroredInputs;\n      var newError = error;\n\n      var newErroredInputs = _objectSpread({}, erroredInputs, _defineProperty({}, input, error));\n\n      if (error) {\n        setError(error);\n      } else {\n        newError = Object.values(newErroredInputs).find(Boolean);\n        setError(newError);\n      }\n\n      onError && onError(newError, newErroredInputs);\n      return newErroredInputs;\n    });\n  }, []); // eslint-disable-line\n\n  var setInputTouched = React.useCallback(function (input, value) {\n    requestAnimationFrame(function () {\n      if (document.activeElement.tagName !== 'INPUT') {\n        setIsTouched(true);\n      } else if (value === false) {\n        setIsTouched(false);\n      }\n    });\n    setTouchedInputs(function (touchedInputs) {\n      if (touchedInputs[input] === value) return touchedInputs;\n\n      var newTouchedInputs = _objectSpread({}, touchedInputs, _defineProperty({}, input, value));\n\n      onTouch && onTouch(_defineProperty({}, input, value), newTouchedInputs);\n      return newTouchedInputs;\n    });\n  }, []); // eslint-disable-line\n\n  /** ====== END: META STUFF ====== */\n\n  /** ====== START: CARD NUMBER STUFF ====== */\n\n  var handleBlurCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('cardNumber', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var formattedCardNumber = e.target.value || '';\n      var cardNumber = formattedCardNumber.replace(/\\s/g, '');\n      var cursorPosition = cardNumberField.current.selectionStart;\n      var cardType = utils.cardTypes.getCardTypeByValue(cardNumber);\n      setCardType(cardType);\n      setInputTouched('cardNumber', false); // @ts-ignore\n\n      cardNumberField.current.value = utils.formatter.formatCardNumber(cardNumber);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e); // Due to the card number formatting, the selection cursor will fall to the end of\n      // the input field. Here, we want to reposition the cursor to the correct place.\n\n      requestAnimationFrame(function () {\n        if (document.activeElement !== cardNumberField.current) return;\n\n        if (cardNumberField.current.value[cursorPosition - 1] === ' ') {\n          cursorPosition = cursorPosition + 1;\n        }\n\n        cardNumberField.current.setSelectionRange(cursorPosition, cursorPosition);\n      });\n      var cardNumberError = utils.validator.getCardNumberError(cardNumber, cardNumberValidator, {\n        errorMessages: errorMessages\n      });\n\n      if (!cardNumberError && autoFocus) {\n        expiryDateField.current && expiryDateField.current.focus();\n      }\n\n      setInputError('cardNumber', cardNumberError);\n      props.onError && props.onError(cardNumberError);\n    };\n  }, [autoFocus, cardNumberValidator, errorMessages, onChange, setInputError, setInputTouched]);\n  var handleFocusCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('cardNumber');\n    };\n  }, []);\n  var handleKeyPressCardNumber = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var formattedCardNumber = e.target.value || '';\n      var cardNumber = formattedCardNumber.replace(/\\s/g, '');\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n\n        if (utils.validator.hasCardNumberReachedMaxLength(cardNumber)) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getCardNumberProps = React.useCallback(function () {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref2.refKey,\n        props = _objectWithoutProperties(_ref2, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      'aria-label': 'Card number',\n      autoComplete: 'cc-number',\n      id: 'cardNumber',\n      name: 'cardNumber',\n      placeholder: 'Card number',\n      type: 'tel'\n    }, refKey || 'ref', cardNumberField), props, {\n      onBlur: handleBlurCardNumber(props),\n      onChange: handleChangeCardNumber(props),\n      onFocus: handleFocusCardNumber(props),\n      onKeyPress: handleKeyPressCardNumber(props)\n    });\n  }, [handleBlurCardNumber, handleChangeCardNumber, handleFocusCardNumber, handleKeyPressCardNumber]);\n  /** ====== END: CARD NUMBER STUFF ====== */\n\n  /** ====== START: EXPIRY DATE STUFF ====== */\n\n  var handleBlurExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('expiryDate', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      setInputTouched('expiryDate', false);\n      expiryDateField.current.value = utils.formatter.formatExpiry(e);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e);\n      var expiryDateError = utils.validator.getExpiryDateError(expiryDateField.current.value, expiryValidator, {\n        errorMessages: errorMessages\n      });\n\n      if (!expiryDateError && autoFocus) {\n        cvcField.current && cvcField.current.focus();\n      }\n\n      setInputError('expiryDate', expiryDateError);\n      props.onError && props.onError(expiryDateError);\n    };\n  }, [autoFocus, errorMessages, expiryValidator, onChange, setInputError, setInputTouched]);\n  var handleFocusExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('expiryDate');\n    };\n  }, []);\n  var handleKeyDownExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyDown && props.onKeyDown(e);\n\n      if (e.key === utils.BACKSPACE_KEY_CODE && !e.target.value && autoFocus) {\n        cardNumberField.current && cardNumberField.current.focus();\n      }\n    };\n  }, [autoFocus]);\n  var handleKeyPressExpiryDate = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var formattedExpiryDate = e.target.value || '';\n      var expiryDate = formattedExpiryDate.replace(' / ', '');\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n\n        if (expiryDate.length >= 4) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getExpiryDateProps = React.useCallback(function () {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref3.refKey,\n        props = _objectWithoutProperties(_ref3, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      'aria-label': 'Expiry date in format MM YY',\n      autoComplete: 'cc-exp',\n      id: 'expiryDate',\n      name: 'expiryDate',\n      placeholder: 'MM/YY',\n      type: 'tel'\n    }, refKey || 'ref', expiryDateField), props, {\n      onBlur: handleBlurExpiryDate(props),\n      onChange: handleChangeExpiryDate(props),\n      onFocus: handleFocusExpiryDate(props),\n      onKeyDown: handleKeyDownExpiryDate(props),\n      onKeyPress: handleKeyPressExpiryDate(props)\n    });\n  }, [handleBlurExpiryDate, handleChangeExpiryDate, handleFocusExpiryDate, handleKeyDownExpiryDate, handleKeyPressExpiryDate]);\n  /** ====== END: EXPIRY DATE STUFF ====== */\n\n  /** ====== START: CVC STUFF ====== */\n\n  var handleBlurCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('cvc', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        cardType = _ref4.cardType;\n\n    return function (e) {\n      var cvc = e.target.value;\n      setInputTouched('cvc', false);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e);\n      var cvcError = utils.validator.getCVCError(cvc, cvcValidator, {\n        cardType: cardType,\n        errorMessages: errorMessages\n      });\n\n      if (!cvcError && autoFocus) {\n        zipField.current && zipField.current.focus();\n      }\n\n      setInputError('cvc', cvcError);\n      props.onError && props.onError(cvcError);\n    };\n  }, [autoFocus, cvcValidator, errorMessages, onChange, setInputError, setInputTouched]);\n  var handleFocusCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('cvc');\n    };\n  }, []);\n  var handleKeyDownCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyDown && props.onKeyDown(e);\n\n      if (e.key === utils.BACKSPACE_KEY_CODE && !e.target.value && autoFocus) {\n        expiryDateField.current && expiryDateField.current.focus();\n      }\n    };\n  }, [autoFocus]);\n  var handleKeyPressCVC = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref5 = arguments.length > 1 ? arguments[1] : undefined,\n        cardType = _ref5.cardType;\n\n    return function (e) {\n      var formattedCVC = e.target.value || '';\n      var cvc = formattedCVC.replace(' / ', '');\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n\n        if (cardType && cvc.length >= cardType.code.length) {\n          e.preventDefault();\n        }\n\n        if (cvc.length >= 4) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getCVCProps = React.useCallback(function () {\n    var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref6.refKey,\n        props = _objectWithoutProperties(_ref6, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      'aria-label': 'CVC',\n      autoComplete: 'cc-csc',\n      id: 'cvc',\n      name: 'cvc',\n      placeholder: cardType ? cardType.code.name : 'CVC',\n      type: 'tel'\n    }, refKey || 'ref', cvcField), props, {\n      onBlur: handleBlurCVC(props),\n      onChange: handleChangeCVC(props, {\n        cardType: cardType\n      }),\n      onFocus: handleFocusCVC(props),\n      onKeyDown: handleKeyDownCVC(props),\n      onKeyPress: handleKeyPressCVC(props, {\n        cardType: cardType\n      })\n    });\n  }, [cardType, handleBlurCVC, handleChangeCVC, handleFocusCVC, handleKeyDownCVC, handleKeyPressCVC]);\n  /** ====== END: CVC STUFF ====== */\n\n  /** ====== START: ZIP STUFF ====== */\n\n  var handleBlurZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onBlur && props.onBlur(e);\n      onBlur && onBlur(e);\n      setFocused(undefined);\n      setInputTouched('zip', true);\n    };\n  }, [onBlur, setInputTouched]);\n  var handleChangeZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      var zip = e.target.value;\n      setInputTouched('zip', false);\n      props.onChange && props.onChange(e);\n      onChange && onChange(e);\n      var zipError = utils.validator.getZIPError(zip, {\n        errorMessages: errorMessages\n      });\n      setInputError('zip', zipError);\n      props.onError && props.onError(zipError);\n    };\n  }, [errorMessages, onChange, setInputError, setInputTouched]);\n  var handleFocusZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onFocus && props.onFocus(e);\n      setFocused('zip');\n    };\n  }, []);\n  var handleKeyDownZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyDown && props.onKeyDown(e);\n\n      if (e.key === utils.BACKSPACE_KEY_CODE && !e.target.value && autoFocus) {\n        cvcField.current && cvcField.current.focus();\n      }\n    };\n  }, [autoFocus]);\n  var handleKeyPressZIP = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function (e) {\n      props.onKeyPress && props.onKeyPress(e);\n\n      if (e.key !== utils.ENTER_KEY_CODE) {\n        if (!utils.validator.isNumeric(e)) {\n          e.preventDefault();\n        }\n      }\n    };\n  }, []);\n  var getZIPProps = React.useCallback(function () {\n    var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var refKey = _ref7.refKey,\n        props = _objectWithoutProperties(_ref7, [\"refKey\"]);\n\n    return _objectSpread(_defineProperty({\n      autoComplete: 'off',\n      id: 'zip',\n      maxLength: '6',\n      name: 'zip',\n      placeholder: 'ZIP',\n      type: 'tel'\n    }, refKey || 'ref', zipField), props, {\n      onBlur: handleBlurZIP(props),\n      onChange: handleChangeZIP(props),\n      onFocus: handleFocusZIP(props),\n      onKeyDown: handleKeyDownZIP(props),\n      onKeyPress: handleKeyPressZIP(props)\n    });\n  }, [handleBlurZIP, handleChangeZIP, handleFocusZIP, handleKeyDownZIP, handleKeyPressZIP]);\n  /** ====== END: ZIP STUFF ====== */\n\n  /** ====== START: CARD IMAGE STUFF ====== */\n\n  var getCardImageProps = React.useCallback(function () {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var images = props.images || {};\n    return _objectSpread({\n      'aria-label': cardType ? cardType.displayName : 'Placeholder card',\n      children: images[cardType ? cardType.type : 'placeholder'] || images.placeholder,\n      width: '1.5em',\n      height: '1em',\n      viewBox: '0 0 24 16'\n    }, props);\n  }, [cardType]);\n  /** ====== END: CARD IMAGE STUFF ====== */\n  // Set default field errors\n\n  React.useLayoutEffect(function () {\n    if (zipField.current) {\n      var zipError = utils.validator.getZIPError(zipField.current.value, {\n        errorMessages: errorMessages\n      });\n      setInputError('zip', zipError);\n    }\n\n    if (cvcField.current) {\n      var cvcError = utils.validator.getCVCError(cvcField.current.value, cvcValidator, {\n        errorMessages: errorMessages\n      });\n      setInputError('cvc', cvcError);\n    }\n\n    if (expiryDateField.current) {\n      var expiryDateError = utils.validator.getExpiryDateError(expiryDateField.current.value, expiryValidator, {\n        errorMessages: errorMessages\n      });\n      setInputError('expiryDate', expiryDateError);\n    }\n\n    if (cardNumberField.current) {\n      var cardNumberError = utils.validator.getCardNumberError(cardNumberField.current.value, cardNumberValidator, {\n        errorMessages: errorMessages\n      });\n      setInputError('cardNumber', cardNumberError);\n    }\n  }, [cardNumberValidator, cvcValidator, errorMessages, expiryValidator, setInputError]); // Format default values\n\n  React.useLayoutEffect(function () {\n    if (cardNumberField.current) {\n      cardNumberField.current.value = utils.formatter.formatCardNumber(cardNumberField.current.value);\n    }\n\n    if (expiryDateField.current) {\n      expiryDateField.current.value = utils.formatter.formatExpiry({\n        target: expiryDateField.current\n      });\n    }\n  }, []); // Set default card type\n\n  React.useLayoutEffect(function () {\n    if (cardNumberField.current) {\n      var _cardType = utils.cardTypes.getCardTypeByValue(cardNumberField.current.value);\n\n      setCardType(_cardType);\n    }\n  }, []);\n  return {\n    getCardImageProps: getCardImageProps,\n    getCardNumberProps: getCardNumberProps,\n    getExpiryDateProps: getExpiryDateProps,\n    getCVCProps: getCVCProps,\n    getZIPProps: getZIPProps,\n    wrapperProps: {\n      error: error,\n      focused: focused,\n      isTouched: isTouched\n    },\n    meta: {\n      cardType: cardType,\n      erroredInputs: erroredInputs,\n      error: error,\n      focused: focused,\n      isTouched: isTouched,\n      touchedInputs: touchedInputs\n    }\n  };\n}\n\nexport default usePaymentCard;\n"]},"metadata":{},"sourceType":"module"}
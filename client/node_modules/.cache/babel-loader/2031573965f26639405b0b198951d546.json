{"ast":null,"code":"var _jsxFileName = \"/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Detail/comment-reviews-item/comment-reviews-item.component.jsx\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { CommentReviewsItemWrapper, Image, Row, ReadMore, CommentText, ButtonLink } from \"./comment-reviews-item.styles\";\nimport Moment from \"react-moment\";\nimport { FcBusinessman } from \"react-icons/fc\";\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { createStructuredSelector } from \"reselect\";\nimport { withRouter, Redirect } from \"react-router-dom\";\nimport { AiOutlineLike, AiOutlineDislike } from \"react-icons/ai\";\nimport { postLikeOrCancelLikeComment } from \"../../../utils/connectDB\";\n\nconst CommentReviewsItem = ({\n  comment,\n  product,\n  setCommentItemHeight,\n  currentUser,\n  match,\n  history\n}) => {\n  const commentItemReadMore = useRef(null);\n  const [readMore, setReadMore] = useState(false);\n  const [showReadMore, setShowReadMore] = useState(false);\n  const [text, setText] = useState(\"\");\n  useEffect(() => {\n    console.log(commentItemReadMore.current.scrollHeight, commentItemReadMore.current.clientHeight);\n\n    if (comment.text.length > 150) {\n      setShowReadMore(true);\n      setText(comment.text.substr(0, 200)); // setCommentItemHeight(commentItemReadMore.current.scrollHeight - )\n    } else {\n      setShowReadMore(false);\n      setText(comment.text);\n    }\n  }, [comment]);\n\n  const handleSetReadMore = () => {\n    if (readMore) {\n      setReadMore(false);\n      setText(comment.text.substr(0, 200));\n    } else {\n      setReadMore(true);\n      setText(comment.text);\n    }\n  };\n\n  const handleClickLikeButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(splitUrl[splitUrl.length - 1]);\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({\n        pathname: \"/auth\",\n        state: {\n          from: encodeUrl\n        }\n      });\n    }\n\n    postLikeOrCancelLikeComment(comment._id).then(res => console.log(res)).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(CommentReviewsItemWrapper, {\n    ref: commentItemReadMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: comment.user.avatar === \"avatar-default.png\" ? `http://localhost:5000/images/${comment.user.avatar}` : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CommentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, comment.user.name, \" \", comment.user._id === product.user._id ? /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"#3f51b5\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }\n  }, \"Nh\\xE0 b\\xE1n h\\xE0ng \", /*#__PURE__*/React.createElement(FcBusinessman, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 34\n    }\n  })) : \"\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"rgba(0,0,0,0.75)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Moment, {\n    format: \"DD-MM-YYYY HH:mm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, comment.updatedAt)), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, text, \" \", showReadMore ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 40\n    }\n  }, \"... \", /*#__PURE__*/React.createElement(ReadMore, {\n    onClick: handleSetReadMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 50\n    }\n  }, !readMore ? \"Xem thêm\" : \"Thu gọn\")) : null, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: handleClickLikeButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: \"1em\",\n      verticalAlign: \"middle\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineLike, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 114\n    }\n  })), \" (\", comment.likes.length, \")\"), /*#__PURE__*/React.createElement(ButtonLink, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: \"1em\",\n      verticalAlign: \"middle\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineDislike, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 82\n    }\n  })), \" (\", comment.dislikes.length, \")\"), /*#__PURE__*/React.createElement(ButtonLink, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Tr\\u1EA3 l\\u1EDDi\")))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\nexport default connect(mapStateToProps)(withRouter(CommentReviewsItem));","map":{"version":3,"sources":["/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Detail/comment-reviews-item/comment-reviews-item.component.jsx"],"names":["React","useEffect","useState","useRef","CommentReviewsItemWrapper","Image","Row","ReadMore","CommentText","ButtonLink","Moment","FcBusinessman","connect","selectCurrentUser","createStructuredSelector","withRouter","Redirect","AiOutlineLike","AiOutlineDislike","postLikeOrCancelLikeComment","CommentReviewsItem","comment","product","setCommentItemHeight","currentUser","match","history","commentItemReadMore","readMore","setReadMore","showReadMore","setShowReadMore","text","setText","console","log","current","scrollHeight","clientHeight","length","substr","handleSetReadMore","handleClickLikeButton","splitUrl","url","split","encodeURIComponent","encodeUrl","join","push","pathname","state","from","_id","then","res","catch","err","user","avatar","flexDirection","name","color","updatedAt","fontSize","verticalAlign","likes","dislikes","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  CommentReviewsItemWrapper,\n  Image,\n  Row,\n  ReadMore,\n  CommentText, \n  ButtonLink,\n} from \"./comment-reviews-item.styles\";\nimport Moment from \"react-moment\";\nimport { FcBusinessman } from \"react-icons/fc\";\nimport {connect} from \"react-redux\";\nimport {selectCurrentUser} from \"../../../redux/user/user.selectors\";\nimport {createStructuredSelector} from \"reselect\"\nimport {withRouter, Redirect} from \"react-router-dom\";\nimport {AiOutlineLike, AiOutlineDislike} from \"react-icons/ai\"\nimport {postLikeOrCancelLikeComment} from \"../../../utils/connectDB\";\nconst CommentReviewsItem = ({ comment, product , setCommentItemHeight, currentUser, match, history}) => {\n  const commentItemReadMore = useRef(null) \n  const [readMore, setReadMore] = useState(false);\n  const [showReadMore, setShowReadMore] = useState(false);\n  const [text, setText] = useState(\"\");\n  useEffect(() => {\n    console.log(commentItemReadMore.current.scrollHeight, commentItemReadMore.current.clientHeight)\n    if(comment.text.length > 150){\n      setShowReadMore(true);\n      setText(comment.text.substr(0,200)); \n      // setCommentItemHeight(commentItemReadMore.current.scrollHeight - )\n    }else{\n      setShowReadMore(false);\n      setText(comment.text)      \n    }  \n  }, [comment])  \n  const handleSetReadMore = () => {\n    if(readMore){\n      setReadMore(false);\n      setText(comment.text.substr(0,200));\n    }else{\n      setReadMore(true)\n      setText(comment.text);\n    }\n  }  \n  const handleClickLikeButton = () => {       \n    if(!currentUser){                 \n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length-1] = encodeURIComponent(splitUrl[splitUrl.length-1])\n      const encodeUrl = splitUrl.join(\"/\");     \n      return  history.push({pathname : \"/auth\", state : {from : encodeUrl }});\n    }\n    postLikeOrCancelLikeComment(comment._id).then(res => console.log(res)).catch(err => console.log(err))\n  }\n  return (\n    <CommentReviewsItemWrapper ref={commentItemReadMore}>\n      <Row>\n        <Image\n          src={\n            comment.user.avatar === \"avatar-default.png\"\n              ? `http://localhost:5000/images/${comment.user.avatar}`\n              : null\n          }\n        />\n        <Row style={{flexDirection:\"column\"}}>\n          <CommentText>\n            <p>\n              <strong>\n                {comment.user.name}{\" \"}\n                {comment.user._id === product.user._id ? (\n                  <span style={{ color: \"#3f51b5\" }}>\n                    Nhà bán hàng <FcBusinessman />\n                  </span>\n                ) : (\n                  \"\"\n                )}\n              </strong>{\" \"}\n              <span style={{ color: \"rgba(0,0,0,0.75)\" }}>\n                <Moment format=\"DD-MM-YYYY HH:mm\">{comment.updatedAt}</Moment>\n              </span>{\" \"}\n            </p>\n            <p>{text} {showReadMore  ? <span>... <ReadMore onClick={handleSetReadMore}>{!readMore ? \"Xem thêm\" : \"Thu gọn\"}</ReadMore></span> : null} </p>\n           \n          </CommentText>       \n          <div>\n            <ButtonLink onClick={handleClickLikeButton}><span style={{fontSize: \"1em\", verticalAlign: \"middle\"}}><AiOutlineLike/></span> ({comment.likes.length})</ButtonLink>\n            <ButtonLink><span style={{fontSize: \"1em\", verticalAlign: \"middle\"}}><AiOutlineDislike/></span> ({comment.dislikes.length})</ButtonLink>\n            <ButtonLink>Trả lời</ButtonLink>\n          </div>\n        </Row>\n      </Row>\n    </CommentReviewsItemWrapper>\n  );\n};\nconst mapStateToProps = createStructuredSelector({\n  currentUser : selectCurrentUser\n})\nexport default connect(mapStateToProps)(withRouter(CommentReviewsItem));\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Detail/response-item/response-item.component.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { ResponseItemWrapper, Avatar, Row, ResponseText, ReadMore, ButtonLink } from \"./response-item.styles\";\nimport Moment from \"react-moment\";\nimport Button from \"@material-ui/core/Button\";\nimport { FcBusinessman } from \"react-icons/fc\";\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { createStructuredSelector } from \"reselect\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { AiOutlineLike, AiOutlineDislike } from \"react-icons/ai\";\nimport { postLikeOrUnlikeComment, postDislikeOrUndislikeComment, postResponseComment } from \"../../../redux/product-comment-review/product-comment-review.actions\";\n\nconst ResponseItem = ({\n  product,\n  response,\n  currentUser\n}) => {\n  const [text, setText] = useState(\"\");\n  const [readMore, setReadMore] = useState(false);\n  const [showReadMore, setShowReadMore] = useState(false);\n  useEffect(() => {\n    if (response.text.length > 200) {\n      setShowReadMore(true);\n      setText(response.text.substr(0, 200));\n    } else {\n      setShowReadMore(false);\n      setText(response.text);\n    }\n  }, [response]);\n\n  const handleSetReadMore = () => {\n    if (readMore) {\n      setReadMore(false);\n      setText(response.text.substr(0, 200));\n    } else {\n      setReadMore(true);\n      setText(response.text);\n    }\n  };\n\n  const handleClickLikeButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(splitUrl[splitUrl.length - 1]);\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({\n        pathname: \"/auth\",\n        state: {\n          from: encodeUrl\n        }\n      });\n    }\n\n    postLikeOrUnlikeComment(comment._id, currentUser._id);\n  };\n\n  const handleClickDislikeButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(splitUrl[splitUrl.length - 1]);\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({\n        pathname: \"/auth\",\n        state: {\n          from: encodeUrl\n        }\n      });\n    }\n\n    postDislikeOrUndislikeComment(comment._id, currentUser._id);\n  };\n\n  const handleClickResponseCommentButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(splitUrl[splitUrl.length - 1]);\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({\n        pathname: \"/auth\",\n        state: {\n          from: encodeUrl\n        }\n      });\n    }\n\n    setIsReponseComment(true);\n    setTimeout(() => {\n      responseRef.current.focus();\n      responseRef.current.setSelectionRange(responseRef.current.value.length, responseRef.current.value.length);\n    }, timeShowResponse);\n  };\n\n  return /*#__PURE__*/React.createElement(ResponseItemWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: `http://localhost:5000/images/${response.user.avatar}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ResponseText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, response.user.local.name || response.user.google.name || response.user.facebook.name, \" \", response.user._id === product.user._id ? /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"#3f51b5\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  }, \"Nh\\xE0 b\\xE1n h\\xE0ng \", /*#__PURE__*/React.createElement(FcBusinessman, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 34\n    }\n  })) : \"\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"rgba(0,0,0,0.75)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Moment, {\n    format: \"DD-MM-YYYY HH:mm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, response.createdAt)), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, text, \" \", showReadMore ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, !readMore ? \"...\" : \" \", /*#__PURE__*/React.createElement(ReadMore, {\n    onClick: handleSetReadMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }, !readMore ? \"Xem thêm\" : \"Thu gọn\")) : null, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: handleClickLikeButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: \"1em\",\n      verticalAlign: \"middle\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineLike, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  })), \" \", \"(\", comment.likes.length, \")\"), /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: handleClickDislikeButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: \"1em\",\n      verticalAlign: \"middle\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineDislike, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  })), \" \", \"(\", comment.dislikes.length, \")\"), currentUser && currentUser._id !== comment.user._id || !currentUser ? /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: handleClickResponseCommentButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 84\n    }\n  }, \"Tr\\u1EA3 l\\u1EDDi\") : null))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  postDislikeOrUndislikeComment: (commentId, userId) => dispatch(postDislikeOrUndislikeComment(commentId, userId)),\n  postLikeOrUnlikeComment: (commentId, userId) => dispatch(postLikeOrUnlikeComment(commentId, userId)),\n  postResponseComment: (commentId, text) => dispatch(postResponseComment(commentId, text))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(ResponseItem));","map":{"version":3,"sources":["/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Detail/response-item/response-item.component.jsx"],"names":["React","useState","useEffect","ResponseItemWrapper","Avatar","Row","ResponseText","ReadMore","ButtonLink","Moment","Button","FcBusinessman","connect","selectCurrentUser","createStructuredSelector","withRouter","Redirect","Link","AiOutlineLike","AiOutlineDislike","postLikeOrUnlikeComment","postDislikeOrUndislikeComment","postResponseComment","ResponseItem","product","response","currentUser","text","setText","readMore","setReadMore","showReadMore","setShowReadMore","length","substr","handleSetReadMore","handleClickLikeButton","splitUrl","match","url","split","encodeURIComponent","encodeUrl","join","history","push","pathname","state","from","comment","_id","handleClickDislikeButton","handleClickResponseCommentButton","setIsReponseComment","setTimeout","responseRef","current","focus","setSelectionRange","value","timeShowResponse","user","avatar","flexDirection","local","name","google","facebook","color","createdAt","fontSize","verticalAlign","likes","dislikes","mapStateToProps","mapDispatchToProps","dispatch","commentId","userId"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {ResponseItemWrapper, Avatar, Row, ResponseText, ReadMore, ButtonLink} from \"./response-item.styles\";\nimport Moment from \"react-moment\";\nimport Button from \"@material-ui/core/Button\"\nimport { FcBusinessman } from \"react-icons/fc\";\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { createStructuredSelector } from \"reselect\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { AiOutlineLike, AiOutlineDislike } from \"react-icons/ai\";\nimport { postLikeOrUnlikeComment, postDislikeOrUndislikeComment, postResponseComment} from \"../../../redux/product-comment-review/product-comment-review.actions\"\n\nconst ResponseItem = ({product, response, currentUser}) => {\n  const [text, setText] = useState(\"\");\n  const [readMore, setReadMore] = useState(false);\n  const [showReadMore, setShowReadMore] = useState(false);\n  useEffect(() => {   \n    if (response.text.length > 200) {\n      setShowReadMore(true);\n      setText(response.text.substr(0, 200));    \n    } else {\n      setShowReadMore(false);\n      setText(response.text);\n    }\n  }, [response]);\n\n  const handleSetReadMore = () => {\n    if (readMore) {\n      setReadMore(false);\n      setText(response.text.substr(0, 200));\n    } else {\n      setReadMore(true);\n      setText(response.text);\n    }\n  };\n  const handleClickLikeButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(\n        splitUrl[splitUrl.length - 1]\n      );\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({ pathname: \"/auth\", state: { from: encodeUrl } });\n    }\n    postLikeOrUnlikeComment(comment._id, currentUser._id)     \n  };\n  const handleClickDislikeButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(\n        splitUrl[splitUrl.length - 1]\n      );\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({ pathname: \"/auth\", state: { from: encodeUrl } });\n    }\n    postDislikeOrUndislikeComment(comment._id, currentUser._id)\n     \n  };\n  const handleClickResponseCommentButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(\n        splitUrl[splitUrl.length - 1]\n      );\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({ pathname: \"/auth\", state: { from: encodeUrl } });\n    }\n    setIsReponseComment(true);   \n    setTimeout(()=> {\n      responseRef.current.focus();    \n      responseRef.current.setSelectionRange(responseRef.current.value.length,responseRef.current.value.length);\n    }, timeShowResponse)     \n  }\n  return (\n    <ResponseItemWrapper>\n      <Row>\n        <Avatar src={`http://localhost:5000/images/${response.user.avatar}`} />\n        <Row style={{ flexDirection: \"column\" }}>\n        <ResponseText>\n            <p>\n              <strong>\n                {response.user.local.name || response.user.google.name || response.user.facebook.name}{\" \"}\n                {response.user._id === product.user._id ? (\n                  <span style={{ color: \"#3f51b5\" }}>\n                    Nhà bán hàng <FcBusinessman />\n                  </span>\n                ) : (\n                  \"\"\n                )}\n              </strong>{\" \"}\n              <span style={{ color: \"rgba(0,0,0,0.75)\" }}>\n                <Moment format=\"DD-MM-YYYY HH:mm\">{response.createdAt}</Moment>\n              </span>{\" \"}\n            </p>\n            <p>\n              {text}{\" \"}\n              {showReadMore ? (\n                <span>\n                  {!readMore ? \"...\" : \" \" }\n                  <ReadMore onClick={handleSetReadMore}>\n                    {!readMore ? \"Xem thêm\" : \"Thu gọn\"}\n                  </ReadMore>\n                </span>\n              ) : null}{\" \"}\n            </p>\n          </ResponseText>\n          <div>\n            <ButtonLink onClick={handleClickLikeButton}>\n              <span style={{ fontSize: \"1em\", verticalAlign: \"middle\" }}>\n                <AiOutlineLike />\n              </span>{\" \"}\n              ({comment.likes.length})\n            </ButtonLink>\n            <ButtonLink onClick={handleClickDislikeButton}>\n              <span style={{ fontSize: \"1em\", verticalAlign: \"middle\" }}>\n                <AiOutlineDislike />\n              </span>{\" \"}\n              ({comment.dislikes.length})\n            </ButtonLink>\n            {currentUser && currentUser._id !== comment.user._id || !currentUser ? <ButtonLink onClick={handleClickResponseCommentButton}>Trả lời</ButtonLink> :  null}\n          </div>\n          </Row>\n      </Row>\n    </ResponseItemWrapper>\n  )\n}\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n});\nconst mapDispatchToProps = dispatch => ({\n  postDislikeOrUndislikeComment : (commentId, userId) => dispatch(postDislikeOrUndislikeComment(commentId, userId)),\n  postLikeOrUnlikeComment : (commentId, userId) => dispatch(postLikeOrUnlikeComment(commentId, userId)),  \n  postResponseComment : (commentId, text) => dispatch(postResponseComment(commentId, text))\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(ResponseItem));"]},"metadata":{},"sourceType":"module"}
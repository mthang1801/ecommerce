{"ast":null,"code":"var _jsxFileName = \"/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Detail/response-item/response-item.component.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { ResponseItemWrapper, Avatar, Row, ResponseText, ReadMore, ButtonLink, ResponseComment, TextArea } from \"./response-item.styles\";\nimport Moment from \"react-moment\";\nimport Button from \"@material-ui/core/Button\";\nimport { FcBusinessman } from \"react-icons/fc\";\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { createStructuredSelector } from \"reselect\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { AiOutlineLike, AiOutlineDislike } from \"react-icons/ai\";\nimport { postLikeOrUnlikeResponseComment } from \"../../../redux/product-comment-review/product-comment-review.actions\";\n\nconst ResponseItem = ({\n  comment,\n  product,\n  response,\n  currentUser,\n  postLikeOrUnlikeResponseComment,\n  match,\n  history,\n  postResponseComment,\n  handleClickLikeResponseButton,\n  handleClickDislikeReponseButton,\n  handleSubmitResponseToResponseComment\n}) => {\n  const responseRef = useRef(null);\n  const [text, setText] = useState(\"\");\n  const [readMore, setReadMore] = useState(false);\n  const [showReadMore, setShowReadMore] = useState(false);\n  const [isResponseComment, setIsReponseComment] = useState(false);\n  const defaultResponseComment = response.user.local ? response.user.local.name : response.user.google ? response.user.google.name : response.user.facebook ? response.user.facebook.name : \"\";\n  const [responseComment, setResponseComment] = useState(defaultResponseComment);\n  const timeShowResponse = 700;\n  useEffect(() => {\n    if (response.text.length > 200) {\n      setShowReadMore(true);\n      setText(response.text.substr(0, 200));\n    } else {\n      setShowReadMore(false);\n      setText(response.text);\n    }\n  }, [response]);\n\n  const handleSetReadMore = () => {\n    if (readMore) {\n      setReadMore(false);\n      setText(response.text.substr(0, 200));\n    } else {\n      setReadMore(true);\n      setText(response.text);\n    }\n  };\n\n  const handleClickResponseCommentButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(splitUrl[splitUrl.length - 1]);\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({\n        pathname: \"/auth\",\n        state: {\n          from: encodeUrl\n        }\n      });\n    }\n\n    setIsReponseComment(true);\n    setTimeout(() => {\n      responseRef.current.focus();\n      responseRef.current.setSelectionRange(responseRef.current.value.length, responseRef.current.value.length);\n    }, timeShowResponse);\n  };\n\n  return /*#__PURE__*/React.createElement(ResponseItemWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: `http://localhost:5000/images/${response.user.avatar}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ResponseText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, response.user.local ? response.user.local.name : response.user.google ? response.user.google.name : response.user.facebook ? response.user.facebook.name : \"\", \" \", response.user._id === product.user._id ? /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"#3f51b5\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, \"Nh\\xE0 b\\xE1n h\\xE0ng \", /*#__PURE__*/React.createElement(FcBusinessman, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 34\n    }\n  })) : \"\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"rgba(0,0,0,0.75)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Moment, {\n    format: \"DD-MM-YYYY HH:mm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, response.createdAt)), \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, text, \" \", showReadMore ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, !readMore ? \"...\" : \" \", /*#__PURE__*/React.createElement(ReadMore, {\n    onClick: handleSetReadMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, !readMore ? \"Xem thêm\" : \"Thu gọn\")) : null, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: () => handleClickLikeResponseButton(response._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: \"1em\",\n      verticalAlign: \"middle\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineLike, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  })), \" \", \"(\", response.likes.length, \")\"), /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: () => handleClickDislikeReponseButton(response._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: \"1em\",\n      verticalAlign: \"middle\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineDislike, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  })), \" \", \"(\", response.dislikes.length, \")\"), currentUser && currentUser._id !== response.user._id || !currentUser ? /*#__PURE__*/React.createElement(ButtonLink, {\n    onClick: handleClickResponseCommentButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"Tr\\u1EA3 l\\u1EDDi\") : null), isResponseComment ? /*#__PURE__*/React.createElement(ResponseComment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    timeShowResponse: timeShowResponse,\n    ref: responseRef,\n    value: responseComment,\n    onChange: e => setResponseComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    style: {\n      margin: \"10px 0\"\n    },\n    size: \"small\",\n    onClick: () => {\n      handleSubmitResponseToResponseComment(responseComment);\n      setIsReponseComment(false);\n      setResponseComment();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, \"G\\u1EEDi b\\xECnh lu\\u1EADn\")) : null)));\n};\n\nexport default ResponseItem;","map":{"version":3,"sources":["/home/mvt/Desktop/projects/mern-stack/e-commerce/client/src/components/Product-Detail/response-item/response-item.component.jsx"],"names":["React","useState","useEffect","useRef","ResponseItemWrapper","Avatar","Row","ResponseText","ReadMore","ButtonLink","ResponseComment","TextArea","Moment","Button","FcBusinessman","connect","selectCurrentUser","createStructuredSelector","withRouter","Redirect","Link","AiOutlineLike","AiOutlineDislike","postLikeOrUnlikeResponseComment","ResponseItem","comment","product","response","currentUser","match","history","postResponseComment","handleClickLikeResponseButton","handleClickDislikeReponseButton","handleSubmitResponseToResponseComment","responseRef","text","setText","readMore","setReadMore","showReadMore","setShowReadMore","isResponseComment","setIsReponseComment","defaultResponseComment","user","local","name","google","facebook","responseComment","setResponseComment","timeShowResponse","length","substr","handleSetReadMore","handleClickResponseCommentButton","splitUrl","url","split","encodeURIComponent","encodeUrl","join","push","pathname","state","from","setTimeout","current","focus","setSelectionRange","value","avatar","flexDirection","_id","color","createdAt","fontSize","verticalAlign","likes","dislikes","e","target","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport {\n  ResponseItemWrapper,\n  Avatar,\n  Row,\n  ResponseText,\n  ReadMore,\n  ButtonLink,\n  ResponseComment,\n  TextArea\n} from \"./response-item.styles\";\nimport Moment from \"react-moment\";\nimport Button from \"@material-ui/core/Button\";\nimport { FcBusinessman } from \"react-icons/fc\";\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"../../../redux/user/user.selectors\";\nimport { createStructuredSelector } from \"reselect\";\nimport { withRouter, Redirect, Link } from \"react-router-dom\";\nimport { AiOutlineLike, AiOutlineDislike } from \"react-icons/ai\";\nimport {\n  postLikeOrUnlikeResponseComment\n} from \"../../../redux/product-comment-review/product-comment-review.actions\";\n\nconst ResponseItem = ({\n  comment,\n  product,\n  response,\n  currentUser,\n  postLikeOrUnlikeResponseComment,\n  match,\n  history,\n  postResponseComment,\n  handleClickLikeResponseButton,\n  handleClickDislikeReponseButton,\n  handleSubmitResponseToResponseComment\n}) => {\n  const responseRef = useRef(null);\n  const [text, setText] = useState(\"\");\n  const [readMore, setReadMore] = useState(false);\n  const [showReadMore, setShowReadMore] = useState(false);\n  const [isResponseComment, setIsReponseComment] = useState(false);\n  const defaultResponseComment = response.user.local ? response.user.local.name :\n    response.user.google ? response.user.google.name :\n    response.user.facebook ? response.user.facebook.name : \"\";\n  const [responseComment, setResponseComment] = useState(defaultResponseComment);\n  const timeShowResponse = 700 ; \n  useEffect(() => {\n    if (response.text.length > 200) {\n      setShowReadMore(true);\n      setText(response.text.substr(0, 200));\n    } else {\n      setShowReadMore(false);\n      setText(response.text);\n    }\n  }, [response]);  \n  const handleSetReadMore = () => {\n    if (readMore) {\n      setReadMore(false);\n      setText(response.text.substr(0, 200));\n    } else {\n      setReadMore(true);\n      setText(response.text);\n    }\n  };\n  \n  const handleClickResponseCommentButton = () => {\n    if (!currentUser) {\n      let splitUrl = match.url.split(\"/\");\n      splitUrl[splitUrl.length - 1] = encodeURIComponent(\n        splitUrl[splitUrl.length - 1]\n      );\n      const encodeUrl = splitUrl.join(\"/\");\n      return history.push({ pathname: \"/auth\", state: { from: encodeUrl } });\n    }\n    setIsReponseComment(true);\n    setTimeout(() => {\n      responseRef.current.focus();\n      responseRef.current.setSelectionRange(\n        responseRef.current.value.length,\n        responseRef.current.value.length\n      );\n    }, timeShowResponse);\n  };\n\n  return (\n    <ResponseItemWrapper>\n      <Row>\n        <Avatar src={`http://localhost:5000/images/${response.user.avatar}`} />\n        <Row style={{ flexDirection: \"column\" }}>\n          <ResponseText>\n            <p>\n              <strong>\n              {(response.user.local ? response.user.local.name :\n                response.user.google ?  response.user.google.name :\n                response.user.facebook ? response.user.facebook.name : \"\")}{\" \"}\n                {response.user._id === product.user._id ? (\n                  <span style={{ color: \"#3f51b5\" }}>\n                    Nhà bán hàng <FcBusinessman />\n                  </span>\n                ) : (\n                  \"\"\n                )}\n              </strong>{\" \"}\n              <span style={{ color: \"rgba(0,0,0,0.75)\" }}>\n                <Moment format=\"DD-MM-YYYY HH:mm\">{response.createdAt}</Moment>\n              </span>{\" \"}\n            </p>\n            <p>\n              {text}{\" \"}\n              {showReadMore ? (\n                <span>\n                  {!readMore ? \"...\" : \" \"}\n                  <ReadMore onClick={handleSetReadMore}>\n                    {!readMore ? \"Xem thêm\" : \"Thu gọn\"}\n                  </ReadMore>\n                </span>\n              ) : null}{\" \"}\n            </p>\n          </ResponseText>\n          <div>\n            <ButtonLink onClick={() => handleClickLikeResponseButton(response._id)}>\n              <span style={{ fontSize: \"1em\", verticalAlign: \"middle\" }}>\n                <AiOutlineLike />\n              </span>{\" \"}\n              ({response.likes.length})\n            </ButtonLink>\n            <ButtonLink onClick={() => handleClickDislikeReponseButton(response._id)}>\n              <span style={{ fontSize: \"1em\", verticalAlign: \"middle\" }}>\n                <AiOutlineDislike />\n              </span>{\" \"}\n              ({response.dislikes.length})\n            </ButtonLink>\n            {(currentUser && currentUser._id !== response.user._id) ||\n            !currentUser ? (\n              <ButtonLink onClick={handleClickResponseCommentButton}>\n                Trả lời\n              </ButtonLink>\n            ) : null}\n          </div>\n          {isResponseComment ? (\n            <ResponseComment>\n              <TextArea\n                timeShowResponse={timeShowResponse}\n                ref={responseRef}\n                value={responseComment}\n                onChange={(e) => setResponseComment(e.target.value)}\n              />\n              <Button\n                color=\"primary\"\n                variant=\"contained\"\n                style={{ margin: \"10px 0\" }}\n                size=\"small\"\n                onClick={() => {\n                  handleSubmitResponseToResponseComment(responseComment)\n                  setIsReponseComment(false);\n                  setResponseComment();\n                }\n              }\n              >\n                Gửi bình luận\n              </Button>\n            </ResponseComment>\n          ) : null}\n        </Row>\n      </Row>\n    </ResponseItemWrapper>\n  );\n};\n\nexport default ResponseItem;\n"]},"metadata":{},"sourceType":"module"}